<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://lunrjs.com"

    >lunr (v2.0.2)</a>
</h1>
<h4>Simple full-text search in your browser.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr">module lunr</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.lunr">
            function <span class="apidocSignatureSpan"></span>lunr
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder">
            function <span class="apidocSignatureSpan">lunr.</span>Builder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Index">
            function <span class="apidocSignatureSpan">lunr.</span>Index
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.MatchData">
            function <span class="apidocSignatureSpan">lunr.</span>MatchData
            <span class="apidocSignatureSpan">(term, field, metadata)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline">
            function <span class="apidocSignatureSpan">lunr.</span>Pipeline
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Query">
            function <span class="apidocSignatureSpan">lunr.</span>Query
            <span class="apidocSignatureSpan">(allFields)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer">
            function <span class="apidocSignatureSpan">lunr.</span>QueryLexer
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParseError">
            function <span class="apidocSignatureSpan">lunr.</span>QueryParseError
            <span class="apidocSignatureSpan">(message, start, end)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser">
            function <span class="apidocSignatureSpan">lunr.</span>QueryParser
            <span class="apidocSignatureSpan">(str, query)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Token">
            function <span class="apidocSignatureSpan">lunr.</span>Token
            <span class="apidocSignatureSpan">(str, metadata)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet">
            function <span class="apidocSignatureSpan">lunr.</span>TokenSet
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.Builder">
            function <span class="apidocSignatureSpan">lunr.</span>TokenSet.Builder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Vector">
            function <span class="apidocSignatureSpan">lunr.</span>Vector
            <span class="apidocSignatureSpan">(elements)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.generateStopWordFilter">
            function <span class="apidocSignatureSpan">lunr.</span>generateStopWordFilter
            <span class="apidocSignatureSpan">(stopWords)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.idf">
            function <span class="apidocSignatureSpan">lunr.</span>idf
            <span class="apidocSignatureSpan">(posting, documentCount)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.stemmer">
            function <span class="apidocSignatureSpan">lunr.</span>stemmer
            <span class="apidocSignatureSpan">(token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.stopWordFilter">
            function <span class="apidocSignatureSpan">lunr.</span>stopWordFilter
            <span class="apidocSignatureSpan">(token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.tokenizer">
            function <span class="apidocSignatureSpan">lunr.</span>tokenizer
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.trimmer">
            function <span class="apidocSignatureSpan">lunr.</span>trimmer
            <span class="apidocSignatureSpan">(token)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>Builder.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>Index.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>MatchData.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>Pipeline.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>Pipeline.registeredFunctions</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>Query.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>QueryLexer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>QueryParser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>Token.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>TokenSet.Builder.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>TokenSet.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>Vector.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.</span>utils</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">lunr.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Builder">module lunr.Builder</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.Builder">
            function <span class="apidocSignatureSpan">lunr.</span>Builder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Builder.prototype">module lunr.Builder.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.prototype.add">
            function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>add
            <span class="apidocSignatureSpan">(doc)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.prototype.b">
            function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>b
            <span class="apidocSignatureSpan">(number)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.prototype.build">
            function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>build
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.prototype.calculateAverageDocumentLengths">
            function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>calculateAverageDocumentLengths
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.prototype.createDocumentVectors">
            function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>createDocumentVectors
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.prototype.createTokenSet">
            function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>createTokenSet
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.prototype.field">
            function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>field
            <span class="apidocSignatureSpan">(field)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.prototype.k1">
            function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>k1
            <span class="apidocSignatureSpan">(number)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.prototype.ref">
            function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>ref
            <span class="apidocSignatureSpan">(ref)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Builder.prototype.use">
            function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>use
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Index">module lunr.Index</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Index.Index">
            function <span class="apidocSignatureSpan">lunr.</span>Index
            <span class="apidocSignatureSpan">(attrs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Index.load">
            function <span class="apidocSignatureSpan">lunr.Index.</span>load
            <span class="apidocSignatureSpan">(serializedIndex)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Index.prototype">module lunr.Index.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Index.prototype.query">
            function <span class="apidocSignatureSpan">lunr.Index.prototype.</span>query
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Index.prototype.search">
            function <span class="apidocSignatureSpan">lunr.Index.prototype.</span>search
            <span class="apidocSignatureSpan">(queryString)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Index.prototype.toJSON">
            function <span class="apidocSignatureSpan">lunr.Index.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.MatchData">module lunr.MatchData</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.MatchData.MatchData">
            function <span class="apidocSignatureSpan">lunr.</span>MatchData
            <span class="apidocSignatureSpan">(term, field, metadata)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.MatchData.prototype">module lunr.MatchData.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.MatchData.prototype.combine">
            function <span class="apidocSignatureSpan">lunr.MatchData.prototype.</span>combine
            <span class="apidocSignatureSpan">(otherMatchData)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Pipeline">module lunr.Pipeline</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.Pipeline">
            function <span class="apidocSignatureSpan">lunr.</span>Pipeline
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.load">
            function <span class="apidocSignatureSpan">lunr.Pipeline.</span>load
            <span class="apidocSignatureSpan">(serialised)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.registerFunction">
            function <span class="apidocSignatureSpan">lunr.Pipeline.</span>registerFunction
            <span class="apidocSignatureSpan">(fn, label)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.warnIfFunctionNotRegistered">
            function <span class="apidocSignatureSpan">lunr.Pipeline.</span>warnIfFunctionNotRegistered
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.Pipeline.</span>registeredFunctions</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Pipeline.prototype">module lunr.Pipeline.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.prototype.add">
            function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>add
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.prototype.after">
            function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>after
            <span class="apidocSignatureSpan">(existingFn, newFn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.prototype.before">
            function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>before
            <span class="apidocSignatureSpan">(existingFn, newFn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.prototype.remove">
            function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>remove
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.prototype.reset">
            function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>reset
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.prototype.run">
            function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>run
            <span class="apidocSignatureSpan">(tokens)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.prototype.runString">
            function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>runString
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.prototype.toJSON">
            function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Pipeline.registeredFunctions">module lunr.Pipeline.registeredFunctions</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.registeredFunctions.stemmer">
            function <span class="apidocSignatureSpan">lunr.Pipeline.registeredFunctions.</span>stemmer
            <span class="apidocSignatureSpan">(token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.registeredFunctions.stopWordFilter">
            function <span class="apidocSignatureSpan">lunr.Pipeline.registeredFunctions.</span>stopWordFilter
            <span class="apidocSignatureSpan">(token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Pipeline.registeredFunctions.trimmer">
            function <span class="apidocSignatureSpan">lunr.Pipeline.registeredFunctions.</span>trimmer
            <span class="apidocSignatureSpan">(token)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Query">module lunr.Query</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Query.Query">
            function <span class="apidocSignatureSpan">lunr.</span>Query
            <span class="apidocSignatureSpan">(allFields)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Query.prototype">module lunr.Query.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Query.prototype.clause">
            function <span class="apidocSignatureSpan">lunr.Query.prototype.</span>clause
            <span class="apidocSignatureSpan">(clause)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Query.prototype.term">
            function <span class="apidocSignatureSpan">lunr.Query.prototype.</span>term
            <span class="apidocSignatureSpan">(term, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.QueryLexer">module lunr.QueryLexer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.QueryLexer">
            function <span class="apidocSignatureSpan">lunr.</span>QueryLexer
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.lexBoost">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexBoost
            <span class="apidocSignatureSpan">(lexer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.lexEOS">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexEOS
            <span class="apidocSignatureSpan">(lexer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.lexEditDistance">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexEditDistance
            <span class="apidocSignatureSpan">(lexer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.lexField">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexField
            <span class="apidocSignatureSpan">(lexer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.lexTerm">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexTerm
            <span class="apidocSignatureSpan">(lexer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.lexText">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexText
            <span class="apidocSignatureSpan">(lexer)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">lunr.QueryLexer.</span>termSeparator</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">lunr.QueryLexer.</span>BOOST</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">lunr.QueryLexer.</span>EDIT_DISTANCE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">lunr.QueryLexer.</span>EOS</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">lunr.QueryLexer.</span>FIELD</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">lunr.QueryLexer.</span>TERM</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.QueryLexer.prototype">module lunr.QueryLexer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.prototype.acceptDigitRun">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>acceptDigitRun
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.prototype.backup">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>backup
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.prototype.emit">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>emit
            <span class="apidocSignatureSpan">(type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.prototype.ignore">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>ignore
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.prototype.more">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>more
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.prototype.next">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>next
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.prototype.run">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>run
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryLexer.prototype.width">
            function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>width
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.QueryParser">module lunr.QueryParser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser.QueryParser">
            function <span class="apidocSignatureSpan">lunr.</span>QueryParser
            <span class="apidocSignatureSpan">(str, query)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser.parseBoost">
            function <span class="apidocSignatureSpan">lunr.QueryParser.</span>parseBoost
            <span class="apidocSignatureSpan">(parser)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser.parseEditDistance">
            function <span class="apidocSignatureSpan">lunr.QueryParser.</span>parseEditDistance
            <span class="apidocSignatureSpan">(parser)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser.parseField">
            function <span class="apidocSignatureSpan">lunr.QueryParser.</span>parseField
            <span class="apidocSignatureSpan">(parser)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser.parseFieldOrTerm">
            function <span class="apidocSignatureSpan">lunr.QueryParser.</span>parseFieldOrTerm
            <span class="apidocSignatureSpan">(parser)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser.parseTerm">
            function <span class="apidocSignatureSpan">lunr.QueryParser.</span>parseTerm
            <span class="apidocSignatureSpan">(parser)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.QueryParser.prototype">module lunr.QueryParser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser.prototype.consumeLexeme">
            function <span class="apidocSignatureSpan">lunr.QueryParser.prototype.</span>consumeLexeme
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser.prototype.nextClause">
            function <span class="apidocSignatureSpan">lunr.QueryParser.prototype.</span>nextClause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser.prototype.parse">
            function <span class="apidocSignatureSpan">lunr.QueryParser.prototype.</span>parse
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.QueryParser.prototype.peekLexeme">
            function <span class="apidocSignatureSpan">lunr.QueryParser.prototype.</span>peekLexeme
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Token">module lunr.Token</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Token.Token">
            function <span class="apidocSignatureSpan">lunr.</span>Token
            <span class="apidocSignatureSpan">(str, metadata)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Token.prototype">module lunr.Token.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Token.prototype.clone">
            function <span class="apidocSignatureSpan">lunr.Token.prototype.</span>clone
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Token.prototype.toString">
            function <span class="apidocSignatureSpan">lunr.Token.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Token.prototype.update">
            function <span class="apidocSignatureSpan">lunr.Token.prototype.</span>update
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.TokenSet">module lunr.TokenSet</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.TokenSet">
            function <span class="apidocSignatureSpan">lunr.</span>TokenSet
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.Builder">
            function <span class="apidocSignatureSpan">lunr.TokenSet.</span>Builder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.fromArray">
            function <span class="apidocSignatureSpan">lunr.TokenSet.</span>fromArray
            <span class="apidocSignatureSpan">(arr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.fromClause">
            function <span class="apidocSignatureSpan">lunr.TokenSet.</span>fromClause
            <span class="apidocSignatureSpan">(clause)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.fromFuzzyString">
            function <span class="apidocSignatureSpan">lunr.TokenSet.</span>fromFuzzyString
            <span class="apidocSignatureSpan">(str, editDistance)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.fromString">
            function <span class="apidocSignatureSpan">lunr.TokenSet.</span>fromString
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">lunr.TokenSet.</span>_nextId</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.TokenSet.Builder">module lunr.TokenSet.Builder</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.Builder.Builder">
            function <span class="apidocSignatureSpan">lunr.TokenSet.</span>Builder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.TokenSet.Builder.prototype">module lunr.TokenSet.Builder.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.Builder.prototype.finish">
            function <span class="apidocSignatureSpan">lunr.TokenSet.Builder.prototype.</span>finish
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.Builder.prototype.insert">
            function <span class="apidocSignatureSpan">lunr.TokenSet.Builder.prototype.</span>insert
            <span class="apidocSignatureSpan">(word)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.Builder.prototype.minimize">
            function <span class="apidocSignatureSpan">lunr.TokenSet.Builder.prototype.</span>minimize
            <span class="apidocSignatureSpan">(downTo)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.TokenSet.prototype">module lunr.TokenSet.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.prototype.intersect">
            function <span class="apidocSignatureSpan">lunr.TokenSet.prototype.</span>intersect
            <span class="apidocSignatureSpan">(b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.prototype.toArray">
            function <span class="apidocSignatureSpan">lunr.TokenSet.prototype.</span>toArray
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.TokenSet.prototype.toString">
            function <span class="apidocSignatureSpan">lunr.TokenSet.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Vector">module lunr.Vector</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Vector.Vector">
            function <span class="apidocSignatureSpan">lunr.</span>Vector
            <span class="apidocSignatureSpan">(elements)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.Vector.prototype">module lunr.Vector.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Vector.prototype.dot">
            function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>dot
            <span class="apidocSignatureSpan">(otherVector)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Vector.prototype.insert">
            function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>insert
            <span class="apidocSignatureSpan">(insertIdx, val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Vector.prototype.magnitude">
            function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>magnitude
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Vector.prototype.similarity">
            function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>similarity
            <span class="apidocSignatureSpan">(otherVector)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Vector.prototype.toArray">
            function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>toArray
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.Vector.prototype.toJSON">
            function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.lunr.utils">module lunr.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.utils.asString">
            function <span class="apidocSignatureSpan">lunr.utils.</span>asString
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.lunr.utils.warn">
            function <span class="apidocSignatureSpan">lunr.utils.</span>warn
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr" id="apidoc.module.lunr">module lunr</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.lunr" id="apidoc.element.lunr.lunr">
        function <span class="apidocSignatureSpan"></span>lunr
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lunr = function (config) {
  var builder = new lunr.Builder

  builder.pipeline.add(
    lunr.trimmer,
    lunr.stopWordFilter,
    lunr.stemmer
  )

  builder.searchPipeline.add(
    lunr.stemmer
  )

  config.call(builder, builder)
  return builder.build()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Builder" id="apidoc.element.lunr.Builder">
        function <span class="apidocSignatureSpan">lunr.</span>Builder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Builder = function () {
  this._ref = &#x22;id&#x22;
  this._fields = []
  this.invertedIndex = Object.create(null)
  this.documentTermFrequencies = {}
  this.documentLengths = {}
  this.tokenizer = lunr.tokenizer
  this.pipeline = new lunr.Pipeline
  this.searchPipeline = new lunr.Pipeline
  this.documentCount = 0
  this._b = 0.75
  this._k1 = 1.2
  this.termIndex = 0
  this.metadataWhitelist = []
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Index" id="apidoc.element.lunr.Index">
        function <span class="apidocSignatureSpan">lunr.</span>Index
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Index = function (attrs) {
  this.invertedIndex = attrs.invertedIndex
  this.documentVectors = attrs.documentVectors
  this.tokenSet = attrs.tokenSet
  this.documentCount = attrs.documentCount
  this.averageDocumentLength = attrs.averageDocumentLength
  this.b = attrs.b
  this.k1 = attrs.k1
  this.fields = attrs.fields
  this.pipeline = attrs.pipeline
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  attrs.documentCount = documentCount
  attrs.documentVectors = documentVectors
  attrs.invertedIndex = invertedIndex
  attrs.tokenSet = tokenSetBuilder.root
  attrs.pipeline = pipeline

  return new lunr.<span class="apidocCodeKeywordSpan">Index</span>(attrs)
}
/*!
 * lunr.Builder
 * Copyright (C) 2017 Oliver Nightingale
 */

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.MatchData" id="apidoc.element.lunr.MatchData">
        function <span class="apidocSignatureSpan">lunr.</span>MatchData
        <span class="apidocSignatureSpan">(term, field, metadata)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">MatchData = function (term, field, metadata) {
  this.metadata = {}
  this.metadata[term] = {}
  this.metadata[term][field] = metadata
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline" id="apidoc.element.lunr.Pipeline">
        function <span class="apidocSignatureSpan">lunr.</span>Pipeline
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Pipeline = function () {
  this._stack = []
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Query" id="apidoc.element.lunr.Query">
        function <span class="apidocSignatureSpan">lunr.</span>Query
        <span class="apidocSignatureSpan">(allFields)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query = function (allFields) {
  this.clauses = []
  this.allFields = allFields
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// for each query clause
// * process terms
// * expand terms from token set
// * find matching documents and metadata
// * get document vectors
// * score documents

var query = new lunr.<span class="apidocCodeKeywordSpan">Query</span>(this.fields),
    matchingDocuments = Object.create(null),
    queryVector = new lunr.Vector

fn.call(query, query)

for (var i = 0; i &#x3c; query.clauses.length; i++) {
  /*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer" id="apidoc.element.lunr.QueryLexer">
        function <span class="apidocSignatureSpan">lunr.</span>QueryLexer
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">QueryLexer = function (str) {
  this.lexemes = []
  this.str = str
  this.length = str.length
  this.pos = 0
  this.start = 0
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryParseError" id="apidoc.element.lunr.QueryParseError">
        function <span class="apidocSignatureSpan">lunr.</span>QueryParseError
        <span class="apidocSignatureSpan">(message, start, end)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">QueryParseError = function (message, start, end) {
  this.name = &#x22;QueryParseError&#x22;
  this.message = message
  this.start = start
  this.end = end
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryParser" id="apidoc.element.lunr.QueryParser">
        function <span class="apidocSignatureSpan">lunr.</span>QueryParser
        <span class="apidocSignatureSpan">(str, query)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">QueryParser = function (str, query) {
  this.lexer = new lunr.QueryLexer (str)
  this.query = query
  this.currentClause = {}
  this.lexemeIdx = 0
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {lunr.Index~QueryString} queryString - A string containing a lunr query.
* @throws {lunr.QueryParseError} If the passed query string cannot be parsed.
* @returns {lunr.Index~Result[]}
*/
lunr.Index.prototype.search = function (queryString) {
 return this.query(function (query) {
   var parser = new lunr.<span class="apidocCodeKeywordSpan">QueryParser</span>(queryString, query)
   parser.parse()
 })
}

/**
* A query builder callback provides a query object to be used to express
* the query to perform on the index.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Token" id="apidoc.element.lunr.Token">
        function <span class="apidocSignatureSpan">lunr.</span>Token
        <span class="apidocSignatureSpan">(str, metadata)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Token = function (str, metadata) {
  this.str = str || &#x22;&#x22;
  this.metadata = metadata || {}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
lunr.tokenizer = function (obj) {
if (obj == null || obj == undefined) {
  return []
}

if (Array.isArray(obj)) {
  return obj.map(function (t) {
    return new lunr.<span class="apidocCodeKeywordSpan">Token</span>(lunr.utils.asString(t).toLowerCase())
  })
}

var str = obj.toString().trim().toLowerCase(),
    len = str.length,
    tokens = []
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet" id="apidoc.element.lunr.TokenSet">
        function <span class="apidocSignatureSpan">lunr.</span>TokenSet
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">TokenSet = function () {
  this.final = false
  this.edges = {}
  this.id = lunr.TokenSet._nextId
  lunr.TokenSet._nextId += 1
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet.Builder" id="apidoc.element.lunr.TokenSet.Builder">
        function <span class="apidocSignatureSpan">lunr.</span>TokenSet.Builder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">TokenSet.Builder = function () {
  this.previousWord = &#x22;&#x22;
  this.root = new lunr.TokenSet
  this.uncheckedNodes = []
  this.minimizedNodes = {}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Vector" id="apidoc.element.lunr.Vector">
        function <span class="apidocSignatureSpan">lunr.</span>Vector
        <span class="apidocSignatureSpan">(elements)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Vector = function (elements) {
  this._magnitude = 0
  this.elements = elements || []
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

for (var i = 0; i &#x3c; serializedVectors.length; i++, documentCount++) {
  var tuple = serializedVectors[i],
      ref = tuple[0],
      elements = tuple[1]

  documentVectors[ref] = new lunr.<span class="apidocCodeKeywordSpan">Vector</span>(elements)
}

for (var i = 0; i &#x3c; serializedInvertedIndex.length; i++) {
  var tuple = serializedInvertedIndex[i],
      term = tuple[0],
      posting = tuple[1]
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.generateStopWordFilter" id="apidoc.element.lunr.generateStopWordFilter">
        function <span class="apidocSignatureSpan">lunr.</span>generateStopWordFilter
        <span class="apidocSignatureSpan">(stopWords)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">generateStopWordFilter = function (stopWords) {
  var words = stopWords.reduce(function (memo, stopWord) {
    memo[stopWord] = stopWord
    return memo
  }, {})

  return function (token) {
    if (token &#x26;&#x26; words[token.toString()] !== token.toString()) return token
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * filter then undefined will be returned.
 *
 * @implements {lunr.PipelineFunction}
 * @params {lunr.Token} token - A token to check for being a stop word.
 * @returns {lunr.Token}
 * @see {@link lunr.Pipeline}
 */
lunr.stopWordFilter = lunr.<span class="apidocCodeKeywordSpan">generateStopWordFilter</span>([
&#x27;a&#x27;,
&#x27;able&#x27;,
&#x27;about&#x27;,
&#x27;across&#x27;,
&#x27;after&#x27;,
&#x27;all&#x27;,
&#x27;almost&#x27;,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.idf" id="apidoc.element.lunr.idf">
        function <span class="apidocSignatureSpan">lunr.</span>idf
        <span class="apidocSignatureSpan">(posting, documentCount)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">idf = function (posting, documentCount) {
  var documentsWithTerm = 0

  for (var fieldName in posting) {
    if (fieldName == &#x27;_index&#x27;) continue // Ignore the term index, its not a field
    documentsWithTerm += Object.keys(posting[fieldName]).length
  }

  return (documentCount - documentsWithTerm + 0.5) / (documentsWithTerm + 0.5)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * Also need to discover the terms index to insert into the query
 * vector at the right position
 */
var expandedTerm = expandedTerms[j],
    posting = this.invertedIndex[expandedTerm],
    termIndex = posting._index,
    idf = lunr.<span class="apidocCodeKeywordSpan">idf</span>(posting, this.documentCount),
    tf = 1,
    score = idf * ((this.k1 + 1) * tf) / (this.k1 * (1 - this.b + this.b * (query.clauses.length / this.averageDocumentLength)) +
tf)

/*
 * Inserting the found query term, along with its term index
 * into the vector representing the query. It is here that
 * any boosts are applied to the score. They could have been
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.stemmer" id="apidoc.element.lunr.stemmer">
        function <span class="apidocSignatureSpan">lunr.</span>stemmer
        <span class="apidocSignatureSpan">(token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stemmer = function (token) {
  return token.update(porterStemmer);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...




suite(&#x27;lunr.stemmer&#x27;, function () {
  this.add(&#x27;#call&#x27;, function () {
    for (var i = 0; i &#x3c; words.length; i++) {
      lunr.<span class="apidocCodeKeywordSpan">stemmer</span>(new lunr.Token (words[i]))
    }
  })
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.stopWordFilter" id="apidoc.element.lunr.stopWordFilter">
        function <span class="apidocSignatureSpan">lunr.</span>stopWordFilter
        <span class="apidocSignatureSpan">(token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stopWordFilter = function (token) {
  if (token &#x26;&#x26; words[token.toString()] !== token.toString()) return token
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.tokenizer" id="apidoc.element.lunr.tokenizer">
        function <span class="apidocSignatureSpan">lunr.</span>tokenizer
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tokenizer = function (obj) {
  if (obj == null || obj == undefined) {
    return []
  }

  if (Array.isArray(obj)) {
    return obj.map(function (t) {
      return new lunr.Token(lunr.utils.asString(t).toLowerCase())
    })
  }

  var str = obj.toString().trim().toLowerCase(),
      len = str.length,
      tokens = []

  for (var sliceEnd = 0, sliceStart = 0; sliceEnd &#x3c;= len; sliceEnd++) {
    var char = str.charAt(sliceEnd),
        sliceLength = sliceEnd - sliceStart

    if ((char.match(lunr.tokenizer.separator) || sliceEnd == len)) {

      if (sliceLength &#x3e; 0) {
        tokens.push(
          new lunr.Token (str.slice(sliceStart, sliceEnd), {
            position: [sliceStart, sliceLength],
            index: tokens.length
          })
        )
      }

      sliceStart = sliceEnd + 1
    }

  }

  return tokens
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.documentCount += 1
  this.documentTermFrequencies[docRef] = documentTerms
  this.documentLengths[docRef] = 0

  for (var i = 0; i &#x3c; this._fields.length; i++) {
var fieldName = this._fields[i],
    field = doc[fieldName],
    tokens = this.<span class="apidocCodeKeywordSpan">tokenizer</span>(field),
    terms = this.pipeline.run(tokens)

// store the length of this field for this document
this.documentLengths[docRef] += terms.length

// calculate term frequencies for this field
for (var j = 0; j &#x3c; terms.length; j++) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.trimmer" id="apidoc.element.lunr.trimmer">
        function <span class="apidocSignatureSpan">lunr.</span>trimmer
        <span class="apidocSignatureSpan">(token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trimmer = function (token) {
  return token.update(function (s) {
    return s.replace(/^\W+/, &#x27;&#x27;).replace(/\W+$/, &#x27;&#x27;)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Builder" id="apidoc.module.lunr.Builder">module lunr.Builder</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Builder.Builder" id="apidoc.element.lunr.Builder.Builder">
        function <span class="apidocSignatureSpan">lunr.</span>Builder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Builder = function () {
  this._ref = &#x22;id&#x22;
  this._fields = []
  this.invertedIndex = Object.create(null)
  this.documentTermFrequencies = {}
  this.documentLengths = {}
  this.tokenizer = lunr.tokenizer
  this.pipeline = new lunr.Pipeline
  this.searchPipeline = new lunr.Pipeline
  this.documentCount = 0
  this._b = 0.75
  this._k1 = 1.2
  this.termIndex = 0
  this.metadataWhitelist = []
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Builder.prototype" id="apidoc.module.lunr.Builder.prototype">module lunr.Builder.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Builder.prototype.add" id="apidoc.element.lunr.Builder.prototype.add">
        function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>add
        <span class="apidocSignatureSpan">(doc)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">add = function (doc) {
  var docRef = doc[this._ref],
      documentTerms = {}

  this.documentCount += 1
  this.documentTermFrequencies[docRef] = documentTerms
  this.documentLengths[docRef] = 0

  for (var i = 0; i &#x3c; this._fields.length; i++) {
    var fieldName = this._fields[i],
        field = doc[fieldName],
        tokens = this.tokenizer(field),
        terms = this.pipeline.run(tokens)

    // store the length of this field for this document
    this.documentLengths[docRef] += terms.length

    // calculate term frequencies for this field
    for (var j = 0; j &#x3c; terms.length; j++) {
      var term = terms[j]

      if (documentTerms[term] == undefined) {
        documentTerms[term] = 0
      }

      documentTerms[term] += 1

      // add to inverted index
      // create an initial posting if one doesn&#x27;t exist
      if (this.invertedIndex[term] == undefined) {
        var posting = Object.create(null)
        posting[&#x22;_index&#x22;] = this.termIndex
        this.termIndex += 1

        for (var k = 0; k &#x3c; this._fields.length; k++) {
          posting[this._fields[k]] = Object.create(null)
        }

        this.invertedIndex[term] = posting
      }

      // add an entry for this term/fieldName/docRef to the invertedIndex
      if (this.invertedIndex[term][fieldName][docRef] == undefined) {
        this.invertedIndex[term][fieldName][docRef] = Object.create(null)
      }

      // store all whitelisted metadata about this token in the
      // inverted index
      for (var l = 0; l &#x3c; this.metadataWhitelist.length; l++) {
        var metadataKey = this.metadataWhitelist[l],
            metadata = term.metadata[metadataKey]

        if (this.invertedIndex[term][fieldName][docRef][metadataKey] == undefined) {
          this.invertedIndex[term][fieldName][docRef][metadataKey] = []
        }

        this.invertedIndex[term][fieldName][docRef][metadataKey].push(metadata)
      }
    }

  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
A very simple search index can be created using the following:

```javascript
var idx = lunr(function () {
  this.field(&#x27;title&#x27;)
  this.field(&#x27;body&#x27;)

  this.<span class="apidocCodeKeywordSpan">add</span>({
    &#x22;title&#x22;: &#x22;Twelfth-Night&#x22;,
    &#x22;body&#x22;: &#x22;If music be the food of love, play on: Give me excess of it&#x22;,
    &#x22;author&#x22;: &#x22;William Shakespeare&#x22;,
    &#x22;id&#x22;: &#x22;1&#x22;
  })
})
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Builder.prototype.b" id="apidoc.element.lunr.Builder.prototype.b">
        function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>b
        <span class="apidocSignatureSpan">(number)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">b = function (number) {
  if (number &#x3c; 0) {
    this._b = 0
  } else if (number &#x3e; 1) {
    this._b = 1
  } else {
    this._b = number
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Builder.prototype.build" id="apidoc.element.lunr.Builder.prototype.build">
        function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>build
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">build = function () {
  this.calculateAverageDocumentLengths()
  this.createDocumentVectors()
  this.createTokenSet()

  return new lunr.Index({
    invertedIndex: this.invertedIndex,
    documentVectors: this.documentVectors,
    tokenSet: this.tokenSet,
    averageDocumentLength: this.averageDocumentLength,
    documentCount: this.documentCount,
    fields: this._fields,
    pipeline: this.searchPipeline,
    b: this._b,
    k1: this._k1
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 )

 builder.searchPipeline.add(
   lunr.stemmer
 )

 config.call(builder, builder)
 return builder.<span class="apidocCodeKeywordSpan">build</span>()
}

lunr.version = &#x22;2.0.2&#x22;
/*!
* lunr.utils
* Copyright (C) 2017 Oliver Nightingale
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Builder.prototype.calculateAverageDocumentLengths" id="apidoc.element.lunr.Builder.prototype.calculateAverageDocumentLengths">
        function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>calculateAverageDocumentLengths
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">calculateAverageDocumentLengths = function () {

  var documentRefs = Object.keys(this.documentLengths),
      numberOfDocuments = documentRefs.length,
      allDocumentsLength = 0

  for (var i = 0; i &#x3c; numberOfDocuments; i++) {
    var documentRef = documentRefs[i]
    allDocumentsLength += this.documentLengths[documentRef]
  }

  this.averageDocumentLength = allDocumentsLength / numberOfDocuments
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * This completes the indexing process and should only be called
 * once all documents have been added to the index.
 *
 * @private
 * @returns {lunr.Index}
 */
lunr.Builder.prototype.build = function () {
this.<span class="apidocCodeKeywordSpan">calculateAverageDocumentLengths</span>()
this.createDocumentVectors()
this.createTokenSet()

return new lunr.Index({
  invertedIndex: this.invertedIndex,
  documentVectors: this.documentVectors,
  tokenSet: this.tokenSet,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Builder.prototype.createDocumentVectors" id="apidoc.element.lunr.Builder.prototype.createDocumentVectors">
        function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>createDocumentVectors
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createDocumentVectors = function () {
  var documentVectors = {},
      docRefs = Object.keys(this.documentTermFrequencies),
      docRefsLength = docRefs.length

  for (var i = 0; i &#x3c; docRefsLength; i++) {
    var docRef = docRefs[i],
        documentLength = this.documentLengths[docRef],
        documentVector = new lunr.Vector,
        termFrequencies = this.documentTermFrequencies[docRef],
        terms = Object.keys(termFrequencies),
        termsLength = terms.length

    for (var j = 0; j &#x3c; termsLength; j++) {
      var term = terms[j],
          tf = termFrequencies[term],
          termIndex = this.invertedIndex[term]._index,
          idf = lunr.idf(this.invertedIndex[term], this.documentCount),
          score = idf * ((this._k1 + 1) * tf) / (this._k1 * (1 - this._b + this._b * (documentLength / this.averageDocumentLength
)) + tf),
          scoreWithPrecision = Math.round(score * 1000) / 1000
          // Converts 1.23456789 to 1.234.
          // Reducing the precision so that the vectors take up less
          // space when serialised. Doing it now so that they behave
          // the same before and after serialisation. Also, this is
          // the fastest approach to reducing a number&#x27;s precision in
          // JavaScript.

      documentVector.insert(termIndex, scoreWithPrecision)
    }

    documentVectors[docRef] = documentVector
  }

  this.documentVectors = documentVectors
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * once all documents have been added to the index.
 *
 * @private
 * @returns {lunr.Index}
 */
lunr.Builder.prototype.build = function () {
this.calculateAverageDocumentLengths()
this.<span class="apidocCodeKeywordSpan">createDocumentVectors</span>()
this.createTokenSet()

return new lunr.Index({
  invertedIndex: this.invertedIndex,
  documentVectors: this.documentVectors,
  tokenSet: this.tokenSet,
  averageDocumentLength: this.averageDocumentLength,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Builder.prototype.createTokenSet" id="apidoc.element.lunr.Builder.prototype.createTokenSet">
        function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>createTokenSet
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createTokenSet = function () {
  this.tokenSet = lunr.TokenSet.fromArray(
    Object.keys(this.invertedIndex).sort()
  )
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * @private
 * @returns {lunr.Index}
 */
lunr.Builder.prototype.build = function () {
this.calculateAverageDocumentLengths()
this.createDocumentVectors()
this.<span class="apidocCodeKeywordSpan">createTokenSet</span>()

return new lunr.Index({
  invertedIndex: this.invertedIndex,
  documentVectors: this.documentVectors,
  tokenSet: this.tokenSet,
  averageDocumentLength: this.averageDocumentLength,
  documentCount: this.documentCount,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Builder.prototype.field" id="apidoc.element.lunr.Builder.prototype.field">
        function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>field
        <span class="apidocSignatureSpan">(field)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">field = function (field) {
  this._fields.push(field)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## Example

A very simple search index can be created using the following:

```javascript
var idx = lunr(function () {
this.<span class="apidocCodeKeywordSpan">field</span>(&#x27;title&#x27;)
this.field(&#x27;body&#x27;)

this.add({
  &#x22;title&#x22;: &#x22;Twelfth-Night&#x22;,
  &#x22;body&#x22;: &#x22;If music be the food of love, play on: Give me excess of it&#x22;,
  &#x22;author&#x22;: &#x22;William Shakespeare&#x22;,
  &#x22;id&#x22;: &#x22;1&#x22;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Builder.prototype.k1" id="apidoc.element.lunr.Builder.prototype.k1">
        function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>k1
        <span class="apidocSignatureSpan">(number)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">k1 = function (number) {
  this._k1 = number
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Builder.prototype.ref" id="apidoc.element.lunr.Builder.prototype.ref">
        function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>ref
        <span class="apidocSignatureSpan">(ref)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ref = function (ref) {
  this._ref = ref
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* All documents _must_ be added within the passed config function.
*
* @example
* var idx = lunr(function () {
*   this.field(&#x27;title&#x27;)
*   this.field(&#x27;body&#x27;)
*   this.<span class="apidocCodeKeywordSpan">ref</span>(&#x27;id&#x27;)
*
*   documents.forEach(function (doc) {
*     this.add(doc)
*   }, this)
* })
*
* @see {@link lunr.Builder}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Builder.prototype.use" id="apidoc.element.lunr.Builder.prototype.use">
        function <span class="apidocSignatureSpan">lunr.Builder.prototype.</span>use
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">use = function (fn) {
  var args = Array.prototype.slice.call(arguments, 1)
  args.unshift(this)
  fn.apply(this, args)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Index" id="apidoc.module.lunr.Index">module lunr.Index</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Index.Index" id="apidoc.element.lunr.Index.Index">
        function <span class="apidocSignatureSpan">lunr.</span>Index
        <span class="apidocSignatureSpan">(attrs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Index = function (attrs) {
  this.invertedIndex = attrs.invertedIndex
  this.documentVectors = attrs.documentVectors
  this.tokenSet = attrs.tokenSet
  this.documentCount = attrs.documentCount
  this.averageDocumentLength = attrs.averageDocumentLength
  this.b = attrs.b
  this.k1 = attrs.k1
  this.fields = attrs.fields
  this.pipeline = attrs.pipeline
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  attrs.documentCount = documentCount
  attrs.documentVectors = documentVectors
  attrs.invertedIndex = invertedIndex
  attrs.tokenSet = tokenSetBuilder.root
  attrs.pipeline = pipeline

  return new lunr.<span class="apidocCodeKeywordSpan">Index</span>(attrs)
}
/*!
 * lunr.Builder
 * Copyright (C) 2017 Oliver Nightingale
 */

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Index.load" id="apidoc.element.lunr.Index.load">
        function <span class="apidocSignatureSpan">lunr.Index.</span>load
        <span class="apidocSignatureSpan">(serializedIndex)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">load = function (serializedIndex) {
  var attrs = {},
      documentVectors = {},
      serializedVectors = serializedIndex.documentVectors,
      documentCount = 0,
      invertedIndex = {},
      serializedInvertedIndex = serializedIndex.invertedIndex,
      tokenSetBuilder = new lunr.TokenSet.Builder,
      pipeline = lunr.Pipeline.load(serializedIndex.pipeline)

  if (serializedIndex.version != lunr.version) {
    lunr.utils.warn(&#x22;Version mismatch when loading serialised index. Current version of lunr &#x27;&#x22; + lunr.version + &#x22;&#x27; does not match
 serialized index &#x27;&#x22; + serializedIndex.version + &#x22;&#x27;&#x22;)
  }

  for (var i = 0; i &#x3c; serializedVectors.length; i++, documentCount++) {
    var tuple = serializedVectors[i],
        ref = tuple[0],
        elements = tuple[1]

    documentVectors[ref] = new lunr.Vector(elements)
  }

  for (var i = 0; i &#x3c; serializedInvertedIndex.length; i++) {
    var tuple = serializedInvertedIndex[i],
        term = tuple[0],
        posting = tuple[1]

    tokenSetBuilder.insert(term)
    invertedIndex[term] = posting
  }

  tokenSetBuilder.finish()

  attrs.b = serializedIndex.b
  attrs.k1 = serializedIndex.k1
  attrs.fields = serializedIndex.fields
  attrs.averageDocumentLength = serializedIndex.averageDocumentLength

  attrs.documentCount = documentCount
  attrs.documentVectors = documentVectors
  attrs.invertedIndex = invertedIndex
  attrs.tokenSet = tokenSetBuilder.root
  attrs.pipeline = pipeline

  return new lunr.Index(attrs)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var attrs = {},
    documentVectors = {},
    serializedVectors = serializedIndex.documentVectors,
    documentCount = 0,
    invertedIndex = {},
    serializedInvertedIndex = serializedIndex.invertedIndex,
    tokenSetBuilder = new lunr.TokenSet.Builder,
    pipeline = lunr.Pipeline.<span class="apidocCodeKeywordSpan">load</span>(serializedIndex.pipeline)

if (serializedIndex.version != lunr.version) {
  lunr.utils.warn(&#x22;Version mismatch when loading serialised index. Current version of lunr &#x27;&#x22; + lunr.version + &#
x22;&#x27; does not match serialized index &#x27;&#x22; + serializedIndex.version + &#x22;&#x27;&#x22;)
}

for (var i = 0; i &#x3c; serializedVectors.length; i++, documentCount++) {
  var tuple = serializedVectors[i],
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Index.prototype" id="apidoc.module.lunr.Index.prototype">module lunr.Index.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Index.prototype.query" id="apidoc.element.lunr.Index.prototype.query">
        function <span class="apidocSignatureSpan">lunr.Index.prototype.</span>query
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">query = function (fn) {
  // for each query clause
  // * process terms
  // * expand terms from token set
  // * find matching documents and metadata
  // * get document vectors
  // * score documents

  var query = new lunr.Query(this.fields),
      matchingDocuments = Object.create(null),
      queryVector = new lunr.Vector

  fn.call(query, query)

  for (var i = 0; i &#x3c; query.clauses.length; i++) {
<span class="apidocCodeCommentSpan">    /*
     * Unless the pipeline has been disabled for this term, which is
     * the case for terms with wildcards, we need to pass the clause
     * term through the search pipeline. A pipeline returns an array
     * of processed terms. Pipeline functions may expand the passed
     * term, which means we may end up performing multiple index lookups
     * for a single query term.
     */
</span>    var clause = query.clauses[i],
        terms = null

    if (clause.usePipeline) {
      terms = this.pipeline.runString(clause.term)
    } else {
      terms = [clause.term]
    }

    for (var m = 0; m &#x3c; terms.length; m++) {
      var term = terms[m]

      /*
       * Each term returned from the pipeline needs to use the same query
       * clause object, e.g. the same boost and or edit distance. The
       * simplest way to do this is to re-use the clause object but mutate
       * its term property.
       */
      clause.term = term

      /*
       * From the term in the clause we create a token set which will then
       * be used to intersect the indexes token set to get a list of terms
       * to lookup in the inverted index
       */
      var termTokenSet = lunr.TokenSet.fromClause(clause),
          expandedTerms = this.tokenSet.intersect(termTokenSet).toArray()

      for (var j = 0; j &#x3c; expandedTerms.length; j++) {
        /*
         * For each term calculate the score as the term relates to the
         * query using the same calculation used to score documents during
         * indexing. This score will be used to build a vector space
         * representation  of the query.
         *
         * Also need to discover the terms index to insert into the query
         * vector at the right position
         */
        var expandedTerm = expandedTerms[j],
            posting = this.invertedIndex[expandedTerm],
            termIndex = posting._index,
            idf = lunr.idf(posting, this.documentCount),
            tf = 1,
            score = idf * ((this.k1 + 1) * tf) / (this.k1 * (1 - this.b + this.b * (query.clauses.length / this.averageDocumentLength
)) + tf)

        /*
         * Inserting the found query term, along with its term index
         * into the vector representing the query. It is here that
         * any boosts are applied to the score. They could have been
         * applied when calculating the score above, but that expression
         * is already quite busy.
         */
        queryVector.insert(termIndex, score * clause.boost)

        for (var k = 0; k &#x3c; clause.fields.length; k++) {
          /*
           * For each field that this query term is scoped by (by default
           * all fields are in scope) we need to get all the document refs
           * that have this term in that field.
           *
           * The posting is the entry in the invertedIndex for the matching
           * term from above.
           */
          var field = clause.fields[k],
              fieldPosting = posting[field],
              matchingDocumentRefs = Object.keys(fieldPosting)

          for (var l = 0; l &#x3c; matchingDocumentRefs.length; l++) {
            /*
             * All metadata for this term/field/document triple
             * are then extracted and collected into an instance
             * of lunr.MatchData ready to be returned in the query
             * results
             */
            var matchingDocumentRef = matchingDocumentRefs[l],
                documentMetadata, matchData

            documentMetadata = fieldPosting[matchingDocumentRef]
            matchData = new lunr.MatchData (expandedTerm, field, documentMetadata)

            if (matchingDocumentRef in matchingDocuments) { ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* For more programmatic querying use lunr.Index#query.
*
* @param {lunr.Index~QueryString} queryString - A string containing a lunr query.
* @throws {lunr.QueryParseError} If the passed query string cannot be parsed.
* @returns {lunr.Index~Result[]}
*/
lunr.Index.prototype.search = function (queryString) {
 return this.<span class="apidocCodeKeywordSpan">query</span>(function (query) {
   var parser = new lunr.QueryParser(queryString, query)
   parser.parse()
 })
}

/**
* A query builder callback provides a query object to be used to express
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Index.prototype.search" id="apidoc.element.lunr.Index.prototype.search">
        function <span class="apidocSignatureSpan">lunr.Index.prototype.</span>search
        <span class="apidocSignatureSpan">(queryString)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">search = function (queryString) {
  return this.query(function (query) {
    var parser = new lunr.QueryParser(queryString, query)
    parser.parse()
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
})
})
```

Then searching is as simple:

```javascript
idx.<span class="apidocCodeKeywordSpan">search</span>(&#x22;love&#x22;)
```

This returns a list of matching documents with a score of how closely they match the search query as well as any associated metadata
 about the match:

```javascript
[
{
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Index.prototype.toJSON" id="apidoc.element.lunr.Index.prototype.toJSON">
        function <span class="apidocSignatureSpan">lunr.Index.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  var invertedIndex = Object.keys(this.invertedIndex)
    .sort()
    .map(function (term) {
      return [term, this.invertedIndex[term]]
    }, this)

  var documentVectors = Object.keys(this.documentVectors)
    .map(function (ref) {
      return [ref, this.documentVectors[ref].toJSON()]
    }, this)

  return {
    version: lunr.version,
    averageDocumentLength: this.averageDocumentLength,
    b: this.b,
    k1: this.k1,
    fields: this.fields,
    documentVectors: documentVectors,
    invertedIndex: invertedIndex,
    pipeline: this.pipeline.toJSON()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  .sort()
  .map(function (term) {
    return [term, this.invertedIndex[term]]
  }, this)

var documentVectors = Object.keys(this.documentVectors)
  .map(function (ref) {
    return [ref, this.documentVectors[ref].<span class="apidocCodeKeywordSpan">toJSON</span>()]
  }, this)

return {
  version: lunr.version,
  averageDocumentLength: this.averageDocumentLength,
  b: this.b,
  k1: this.k1,
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.MatchData" id="apidoc.module.lunr.MatchData">module lunr.MatchData</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.MatchData.MatchData" id="apidoc.element.lunr.MatchData.MatchData">
        function <span class="apidocSignatureSpan">lunr.</span>MatchData
        <span class="apidocSignatureSpan">(term, field, metadata)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">MatchData = function (term, field, metadata) {
  this.metadata = {}
  this.metadata[term] = {}
  this.metadata[term][field] = metadata
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.MatchData.prototype" id="apidoc.module.lunr.MatchData.prototype">module lunr.MatchData.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.MatchData.prototype.combine" id="apidoc.element.lunr.MatchData.prototype.combine">
        function <span class="apidocSignatureSpan">lunr.MatchData.prototype.</span>combine
        <span class="apidocSignatureSpan">(otherMatchData)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">combine = function (otherMatchData) {
  var terms = Object.keys(otherMatchData.metadata)

  for (var i = 0; i &#x3c; terms.length; i++) {
    var term = terms[i],
        fields = Object.keys(otherMatchData.metadata[term])

    if (this.metadata[term] == undefined) {
      this.metadata[term] = {}
    }

    for (var j = 0; j &#x3c; fields.length; j++) {
      var field = fields[j],
          keys = Object.keys(otherMatchData.metadata[term][field])

      if (this.metadata[term][field] == undefined) {
        this.metadata[term][field] = {}
      }

      for (var k = 0; k &#x3c; keys.length; k++) {
        var key = keys[k]

        if (this.metadata[term][field][key] == undefined) {
          this.metadata[term][field][key] = otherMatchData.metadata[term][field][key]
        } else {
          this.metadata[term][field][key] = this.metadata[term][field][key].concat(otherMatchData.metadata[term][field][key])
        }

      }
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      var matchingDocumentRef = matchingDocumentRefs[l],
          documentMetadata, matchData

      documentMetadata = fieldPosting[matchingDocumentRef]
      matchData = new lunr.MatchData (expandedTerm, field, documentMetadata)

      if (matchingDocumentRef in matchingDocuments) {
        matchingDocuments[matchingDocumentRef].<span class="apidocCodeKeywordSpan">combine</span>(matchData)
      } else {
        matchingDocuments[matchingDocumentRef] = matchData
      }

    }
  }
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Pipeline" id="apidoc.module.lunr.Pipeline">module lunr.Pipeline</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Pipeline.Pipeline" id="apidoc.element.lunr.Pipeline.Pipeline">
        function <span class="apidocSignatureSpan">lunr.</span>Pipeline
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Pipeline = function () {
  this._stack = []
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.load" id="apidoc.element.lunr.Pipeline.load">
        function <span class="apidocSignatureSpan">lunr.Pipeline.</span>load
        <span class="apidocSignatureSpan">(serialised)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">load = function (serialised) {
  var pipeline = new lunr.Pipeline

  serialised.forEach(function (fnName) {
    var fn = lunr.Pipeline.registeredFunctions[fnName]

    if (fn) {
      pipeline.add(fn)
    } else {
      throw new Error(&#x27;Cannot load unregistered function: &#x27; + fnName)
    }
  })

  return pipeline
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var attrs = {},
    documentVectors = {},
    serializedVectors = serializedIndex.documentVectors,
    documentCount = 0,
    invertedIndex = {},
    serializedInvertedIndex = serializedIndex.invertedIndex,
    tokenSetBuilder = new lunr.TokenSet.Builder,
    pipeline = lunr.Pipeline.<span class="apidocCodeKeywordSpan">load</span>(serializedIndex.pipeline)

if (serializedIndex.version != lunr.version) {
  lunr.utils.warn(&#x22;Version mismatch when loading serialised index. Current version of lunr &#x27;&#x22; + lunr.version + &#
x22;&#x27; does not match serialized index &#x27;&#x22; + serializedIndex.version + &#x22;&#x27;&#x22;)
}

for (var i = 0; i &#x3c; serializedVectors.length; i++, documentCount++) {
  var tuple = serializedVectors[i],
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.registerFunction" id="apidoc.element.lunr.Pipeline.registerFunction">
        function <span class="apidocSignatureSpan">lunr.Pipeline.</span>registerFunction
        <span class="apidocSignatureSpan">(fn, label)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerFunction = function (fn, label) {
  if (label in this.registeredFunctions) {
    lunr.utils.warn(&#x27;Overwriting existing registered function: &#x27; + label)
  }

  fn.label = label
  lunr.Pipeline.registeredFunctions[fn.label] = fn
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 };

 return function (token) {
   return token.update(porterStemmer);
 }
})();

lunr.Pipeline.<span class="apidocCodeKeywordSpan">registerFunction</span>(lunr.stemmer, &#x27;stemmer&#x27;)
/*!
* lunr.stopWordFilter
* Copyright (C) 2017 Oliver Nightingale
*/

/**
* lunr.generateStopWordFilter builds a stopWordFilter function from the provided
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.warnIfFunctionNotRegistered" id="apidoc.element.lunr.Pipeline.warnIfFunctionNotRegistered">
        function <span class="apidocSignatureSpan">lunr.Pipeline.</span>warnIfFunctionNotRegistered
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warnIfFunctionNotRegistered = function (fn) {
  var isRegistered = fn.label &#x26;&#x26; (fn.label in this.registeredFunctions)

  if (!isRegistered) {
    lunr.utils.warn(&#x27;Function is not registered with pipeline. This may cause problems when serialising the index.\n&#x27;, fn)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {lunr.PipelineFunction[]} functions - Any number of functions to add to the pipeline.
*/
lunr.Pipeline.prototype.add = function () {
 var fns = Array.prototype.slice.call(arguments)

 fns.forEach(function (fn) {
   lunr.Pipeline.<span class="apidocCodeKeywordSpan">warnIfFunctionNotRegistered</span>(fn)
   this._stack.push(fn)
 }, this)
}

/**
* Adds a single function after a function that already exists in the
* pipeline.
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Pipeline.prototype" id="apidoc.module.lunr.Pipeline.prototype">module lunr.Pipeline.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Pipeline.prototype.add" id="apidoc.element.lunr.Pipeline.prototype.add">
        function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>add
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">add = function () {
  var fns = Array.prototype.slice.call(arguments)

  fns.forEach(function (fn) {
    lunr.Pipeline.warnIfFunctionNotRegistered(fn)
    this._stack.push(fn)
  }, this)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
A very simple search index can be created using the following:

```javascript
var idx = lunr(function () {
  this.field(&#x27;title&#x27;)
  this.field(&#x27;body&#x27;)

  this.<span class="apidocCodeKeywordSpan">add</span>({
    &#x22;title&#x22;: &#x22;Twelfth-Night&#x22;,
    &#x22;body&#x22;: &#x22;If music be the food of love, play on: Give me excess of it&#x22;,
    &#x22;author&#x22;: &#x22;William Shakespeare&#x22;,
    &#x22;id&#x22;: &#x22;1&#x22;
  })
})
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.prototype.after" id="apidoc.element.lunr.Pipeline.prototype.after">
        function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>after
        <span class="apidocSignatureSpan">(existingFn, newFn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">after = function (existingFn, newFn) {
  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)

  var pos = this._stack.indexOf(existingFn)
  if (pos == -1) {
    throw new Error(&#x27;Cannot find existingFn&#x27;)
  }

  pos = pos + 1
  this._stack.splice(pos, 0, newFn)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.prototype.before" id="apidoc.element.lunr.Pipeline.prototype.before">
        function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>before
        <span class="apidocSignatureSpan">(existingFn, newFn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">before = function (existingFn, newFn) {
  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)

  var pos = this._stack.indexOf(existingFn)
  if (pos == -1) {
    throw new Error(&#x27;Cannot find existingFn&#x27;)
  }

  this._stack.splice(pos, 0, newFn)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.prototype.remove" id="apidoc.element.lunr.Pipeline.prototype.remove">
        function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>remove
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (fn) {
  var pos = this._stack.indexOf(fn)
  if (pos == -1) {
    return
  }

  this._stack.splice(pos, 1)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.prototype.reset" id="apidoc.element.lunr.Pipeline.prototype.reset">
        function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>reset
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reset = function () {
  this._stack = []
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.prototype.run" id="apidoc.element.lunr.Pipeline.prototype.run">
        function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>run
        <span class="apidocSignatureSpan">(tokens)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function (tokens) {
  var stackLength = this._stack.length

  for (var i = 0; i &#x3c; stackLength; i++) {
    var fn = this._stack[i]

    tokens = tokens.reduce(function (memo, token, j) {
      var result = fn(token, j, tokens)

      if (result === void 0 || result === &#x27;&#x27;) return memo

      return memo.concat(result)
    }, [])
  }

  return tokens
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {string} str - The string to pass through the pipeline.
* @returns {string[]}
*/
lunr.Pipeline.prototype.runString = function (str) {
 var token = new lunr.Token (str)

 return this.<span class="apidocCodeKeywordSpan">run</span>([token]).map(function (t) {
   return t.toString()
 })
}

/**
* Resets the pipeline by removing any existing processors.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.prototype.runString" id="apidoc.element.lunr.Pipeline.prototype.runString">
        function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>runString
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">runString = function (str) {
  var token = new lunr.Token (str)

  return this.run([token]).map(function (t) {
    return t.toString()
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * term, which means we may end up performing multiple index lookups
 * for a single query term.
 */
var clause = query.clauses[i],
    terms = null

if (clause.usePipeline) {
  terms = this.pipeline.<span class="apidocCodeKeywordSpan">runString</span>(clause.term)
} else {
  terms = [clause.term]
}

for (var m = 0; m &#x3c; terms.length; m++) {
  var term = terms[m]
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.prototype.toJSON" id="apidoc.element.lunr.Pipeline.prototype.toJSON">
        function <span class="apidocSignatureSpan">lunr.Pipeline.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this._stack.map(function (fn) {
    lunr.Pipeline.warnIfFunctionNotRegistered(fn)

    return fn.label
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  .sort()
  .map(function (term) {
    return [term, this.invertedIndex[term]]
  }, this)

var documentVectors = Object.keys(this.documentVectors)
  .map(function (ref) {
    return [ref, this.documentVectors[ref].<span class="apidocCodeKeywordSpan">toJSON</span>()]
  }, this)

return {
  version: lunr.version,
  averageDocumentLength: this.averageDocumentLength,
  b: this.b,
  k1: this.k1,
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Pipeline.registeredFunctions" id="apidoc.module.lunr.Pipeline.registeredFunctions">module lunr.Pipeline.registeredFunctions</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Pipeline.registeredFunctions.stemmer" id="apidoc.element.lunr.Pipeline.registeredFunctions.stemmer">
        function <span class="apidocSignatureSpan">lunr.Pipeline.registeredFunctions.</span>stemmer
        <span class="apidocSignatureSpan">(token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stemmer = function (token) {
  return token.update(porterStemmer);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...




suite(&#x27;lunr.stemmer&#x27;, function () {
  this.add(&#x27;#call&#x27;, function () {
    for (var i = 0; i &#x3c; words.length; i++) {
      lunr.<span class="apidocCodeKeywordSpan">stemmer</span>(new lunr.Token (words[i]))
    }
  })
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.registeredFunctions.stopWordFilter" id="apidoc.element.lunr.Pipeline.registeredFunctions.stopWordFilter">
        function <span class="apidocSignatureSpan">lunr.Pipeline.registeredFunctions.</span>stopWordFilter
        <span class="apidocSignatureSpan">(token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stopWordFilter = function (token) {
  if (token &#x26;&#x26; words[token.toString()] !== token.toString()) return token
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Pipeline.registeredFunctions.trimmer" id="apidoc.element.lunr.Pipeline.registeredFunctions.trimmer">
        function <span class="apidocSignatureSpan">lunr.Pipeline.registeredFunctions.</span>trimmer
        <span class="apidocSignatureSpan">(token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trimmer = function (token) {
  return token.update(function (s) {
    return s.replace(/^\W+/, &#x27;&#x27;).replace(/\W+$/, &#x27;&#x27;)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Query" id="apidoc.module.lunr.Query">module lunr.Query</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Query.Query" id="apidoc.element.lunr.Query.Query">
        function <span class="apidocSignatureSpan">lunr.</span>Query
        <span class="apidocSignatureSpan">(allFields)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query = function (allFields) {
  this.clauses = []
  this.allFields = allFields
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// for each query clause
// * process terms
// * expand terms from token set
// * find matching documents and metadata
// * get document vectors
// * score documents

var query = new lunr.<span class="apidocCodeKeywordSpan">Query</span>(this.fields),
    matchingDocuments = Object.create(null),
    queryVector = new lunr.Vector

fn.call(query, query)

for (var i = 0; i &#x3c; query.clauses.length; i++) {
  /*
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Query.prototype" id="apidoc.module.lunr.Query.prototype">module lunr.Query.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Query.prototype.clause" id="apidoc.element.lunr.Query.prototype.clause">
        function <span class="apidocSignatureSpan">lunr.Query.prototype.</span>clause
        <span class="apidocSignatureSpan">(clause)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clause = function (clause) {
  if (!(&#x27;fields&#x27; in clause)) {
    clause.fields = this.allFields
  }

  if (!(&#x27;boost&#x27; in clause)) {
    clause.boost = 1
  }

  if (!(&#x27;usePipeline&#x27; in clause)) {
    clause.usePipeline = true
  }

  this.clauses.push(clause)

  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @param {Object} [options] - Any additional properties to add to the query clause.
 * @returns {lunr.Query}
 */
lunr.Query.prototype.term = function (term, options) {
var clause = options || {}
clause.term = term

this.<span class="apidocCodeKeywordSpan">clause</span>(clause)

return this
}
lunr.QueryParseError = function (message, start, end) {
this.name = &#x22;QueryParseError&#x22;
this.message = message
this.start = start
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Query.prototype.term" id="apidoc.element.lunr.Query.prototype.term">
        function <span class="apidocSignatureSpan">lunr.Query.prototype.</span>term
        <span class="apidocSignatureSpan">(term, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">term = function (term, options) {
  var clause = options || {}
  clause.term = term

  this.clause(clause)

  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.QueryLexer" id="apidoc.module.lunr.QueryLexer">module lunr.QueryLexer</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.QueryLexer" id="apidoc.element.lunr.QueryLexer.QueryLexer">
        function <span class="apidocSignatureSpan">lunr.</span>QueryLexer
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">QueryLexer = function (str) {
  this.lexemes = []
  this.str = str
  this.length = str.length
  this.pos = 0
  this.start = 0
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.lexBoost" id="apidoc.element.lunr.QueryLexer.lexBoost">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexBoost
        <span class="apidocSignatureSpan">(lexer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lexBoost = function (lexer) {
  lexer.ignore()
  lexer.acceptDigitRun()
  lexer.emit(lunr.QueryLexer.BOOST)
  return lunr.QueryLexer.lexText
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.lexEOS" id="apidoc.element.lunr.QueryLexer.lexEOS">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexEOS
        <span class="apidocSignatureSpan">(lexer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lexEOS = function (lexer) {
  if (lexer.width() &#x3e; 0) {
    lexer.emit(lunr.QueryLexer.TERM)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.lexEditDistance" id="apidoc.element.lunr.QueryLexer.lexEditDistance">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexEditDistance
        <span class="apidocSignatureSpan">(lexer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lexEditDistance = function (lexer) {
  lexer.ignore()
  lexer.acceptDigitRun()
  lexer.emit(lunr.QueryLexer.EDIT_DISTANCE)
  return lunr.QueryLexer.lexText
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.lexField" id="apidoc.element.lunr.QueryLexer.lexField">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexField
        <span class="apidocSignatureSpan">(lexer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lexField = function (lexer) {
  lexer.backup()
  lexer.emit(lunr.QueryLexer.FIELD)
  lexer.ignore()
  return lunr.QueryLexer.lexText
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.lexTerm" id="apidoc.element.lunr.QueryLexer.lexTerm">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexTerm
        <span class="apidocSignatureSpan">(lexer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lexTerm = function (lexer) {
  if (lexer.width() &#x3e; 1) {
    lexer.backup()
    lexer.emit(lunr.QueryLexer.TERM)
  }

  lexer.ignore()

  if (lexer.more()) {
    return lunr.QueryLexer.lexText
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.lexText" id="apidoc.element.lunr.QueryLexer.lexText">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.</span>lexText
        <span class="apidocSignatureSpan">(lexer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lexText = function (lexer) {
  while (true) {
    var char = lexer.next()

    if (char == lunr.QueryLexer.EOS) {
      return lunr.QueryLexer.lexEOS
    }

    if (char == &#x22;:&#x22;) {
      return lunr.QueryLexer.lexField
    }

    if (char == &#x22;~&#x22;) {
      lexer.backup()
      if (lexer.width() &#x3e; 0) {
        lexer.emit(lunr.QueryLexer.TERM)
      }
      return lunr.QueryLexer.lexEditDistance
    }

    if (char == &#x22;^&#x22;) {
      lexer.backup()
      if (lexer.width() &#x3e; 0) {
        lexer.emit(lunr.QueryLexer.TERM)
      }
      return lunr.QueryLexer.lexBoost
    }

    if (char.match(lunr.QueryLexer.termSeparator)) {
      return lunr.QueryLexer.lexTerm
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>














</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.QueryLexer.prototype" id="apidoc.module.lunr.QueryLexer.prototype">module lunr.QueryLexer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.prototype.acceptDigitRun" id="apidoc.element.lunr.QueryLexer.prototype.acceptDigitRun">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>acceptDigitRun
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">acceptDigitRun = function () {
  var char, charCode

  do {
    char = this.next()
    charCode = char.charCodeAt(0)
  } while (charCode &#x3e; 47 &#x26;&#x26; charCode &#x3c; 58)

  if (char != lunr.QueryLexer.EOS) {
    this.backup()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (lexer.more()) {
  return lunr.QueryLexer.lexText
}
}

lunr.QueryLexer.lexEditDistance = function (lexer) {
lexer.ignore()
lexer.<span class="apidocCodeKeywordSpan">acceptDigitRun</span>()
lexer.emit(lunr.QueryLexer.EDIT_DISTANCE)
return lunr.QueryLexer.lexText
}

lunr.QueryLexer.lexBoost = function (lexer) {
lexer.ignore()
lexer.acceptDigitRun()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.prototype.backup" id="apidoc.element.lunr.QueryLexer.prototype.backup">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>backup
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">backup = function () {
  this.pos -= 1
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  do {
    char = this.next()
    charCode = char.charCodeAt(0)
  } while (charCode &#x3e; 47 &#x26;&#x26; charCode &#x3c; 58)

  if (char != lunr.QueryLexer.EOS) {
    this.<span class="apidocCodeKeywordSpan">backup</span>()
  }
}

lunr.QueryLexer.prototype.more = function () {
  return this.pos &#x3c; this.length
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.prototype.emit" id="apidoc.element.lunr.QueryLexer.prototype.emit">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>emit
        <span class="apidocSignatureSpan">(type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emit = function (type) {
  this.lexemes.push({
    type: type,
    str: this.str.slice(this.start, this.pos),
    start: this.start,
    end: this.pos
  })

  this.start = this.pos
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
lunr.QueryLexer.FIELD = &#x27;FIELD&#x27;
lunr.QueryLexer.TERM = &#x27;TERM&#x27;
lunr.QueryLexer.EDIT_DISTANCE = &#x27;EDIT_DISTANCE&#x27;
lunr.QueryLexer.BOOST = &#x27;BOOST&#x27;

lunr.QueryLexer.lexField = function (lexer) {
lexer.backup()
lexer.<span class="apidocCodeKeywordSpan">emit</span>(lunr.QueryLexer.FIELD)
lexer.ignore()
return lunr.QueryLexer.lexText
}

lunr.QueryLexer.lexTerm = function (lexer) {
if (lexer.width() &#x3e; 1) {
  lexer.backup()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.prototype.ignore" id="apidoc.element.lunr.QueryLexer.prototype.ignore">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>ignore
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ignore = function () {
  if (this.start == this.pos) {
    this.pos += 1
  }

  this.start = this.pos
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
lunr.QueryLexer.TERM = &#x27;TERM&#x27;
lunr.QueryLexer.EDIT_DISTANCE = &#x27;EDIT_DISTANCE&#x27;
lunr.QueryLexer.BOOST = &#x27;BOOST&#x27;

lunr.QueryLexer.lexField = function (lexer) {
lexer.backup()
lexer.emit(lunr.QueryLexer.FIELD)
lexer.<span class="apidocCodeKeywordSpan">ignore</span>()
return lunr.QueryLexer.lexText
}

lunr.QueryLexer.lexTerm = function (lexer) {
if (lexer.width() &#x3e; 1) {
  lexer.backup()
  lexer.emit(lunr.QueryLexer.TERM)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.prototype.more" id="apidoc.element.lunr.QueryLexer.prototype.more">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>more
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">more = function () {
  return this.pos &#x3c; this.length
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (lexer.width() &#x3e; 1) {
  lexer.backup()
  lexer.emit(lunr.QueryLexer.TERM)
}

lexer.ignore()

if (lexer.<span class="apidocCodeKeywordSpan">more</span>()) {
  return lunr.QueryLexer.lexText
}
}

lunr.QueryLexer.lexEditDistance = function (lexer) {
lexer.ignore()
lexer.acceptDigitRun()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.prototype.next" id="apidoc.element.lunr.QueryLexer.prototype.next">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>next
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">next = function () {
  if (this.pos == this.length) {
    return lunr.QueryLexer.EOS
  }

  var char = this.str.charAt(this.pos)
  this.pos += 1
  return char
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.pos -= 1
}

lunr.QueryLexer.prototype.acceptDigitRun = function () {
  var char, charCode

  do {
    char = this.<span class="apidocCodeKeywordSpan">next</span>()
    charCode = char.charCodeAt(0)
  } while (charCode &#x3e; 47 &#x26;&#x26; charCode &#x3c; 58)

  if (char != lunr.QueryLexer.EOS) {
    this.backup()
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.prototype.run" id="apidoc.element.lunr.QueryLexer.prototype.run">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>run
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function () {
  var state = lunr.QueryLexer.lexText

  while (state) {
    state = state(this)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {string} str - The string to pass through the pipeline.
* @returns {string[]}
*/
lunr.Pipeline.prototype.runString = function (str) {
 var token = new lunr.Token (str)

 return this.<span class="apidocCodeKeywordSpan">run</span>([token]).map(function (t) {
   return t.toString()
 })
}

/**
* Resets the pipeline by removing any existing processors.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryLexer.prototype.width" id="apidoc.element.lunr.QueryLexer.prototype.width">
        function <span class="apidocSignatureSpan">lunr.QueryLexer.prototype.</span>width
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">width = function () {
  return this.pos - this.start
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
lexer.backup()
lexer.emit(lunr.QueryLexer.FIELD)
lexer.ignore()
return lunr.QueryLexer.lexText
}

lunr.QueryLexer.lexTerm = function (lexer) {
if (lexer.<span class="apidocCodeKeywordSpan">width</span>() &#x3e; 1) {
  lexer.backup()
  lexer.emit(lunr.QueryLexer.TERM)
}

lexer.ignore()

if (lexer.more()) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.QueryParser" id="apidoc.module.lunr.QueryParser">module lunr.QueryParser</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.QueryParser.QueryParser" id="apidoc.element.lunr.QueryParser.QueryParser">
        function <span class="apidocSignatureSpan">lunr.</span>QueryParser
        <span class="apidocSignatureSpan">(str, query)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">QueryParser = function (str, query) {
  this.lexer = new lunr.QueryLexer (str)
  this.query = query
  this.currentClause = {}
  this.lexemeIdx = 0
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {lunr.Index~QueryString} queryString - A string containing a lunr query.
* @throws {lunr.QueryParseError} If the passed query string cannot be parsed.
* @returns {lunr.Index~Result[]}
*/
lunr.Index.prototype.search = function (queryString) {
 return this.query(function (query) {
   var parser = new lunr.<span class="apidocCodeKeywordSpan">QueryParser</span>(queryString, query)
   parser.parse()
 })
}

/**
* A query builder callback provides a query object to be used to express
* the query to perform on the index.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryParser.parseBoost" id="apidoc.element.lunr.QueryParser.parseBoost">
        function <span class="apidocSignatureSpan">lunr.QueryParser.</span>parseBoost
        <span class="apidocSignatureSpan">(parser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseBoost = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  var boost = parseInt(lexeme.str, 10)

  if (isNaN(boost)) {
    var errorMessage = &#x22;boost must be numeric&#x22;
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  parser.currentClause.boost = boost

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    parser.nextClause()
    return
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      parser.nextClause()
      return lunr.QueryParser.parseTerm
    case lunr.QueryLexer.FIELD:
      parser.nextClause()
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.EDIT_DISTANCE:
      return lunr.QueryParser.parseEditDistance
    case lunr.QueryLexer.BOOST:
      return lunr.QueryParser.parseBoost
    default:
      var errorMessage = &#x22;Unexpected lexeme type &#x27;&#x22; + nextLexeme.type + &#x22;&#x27;&#x22;
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryParser.parseEditDistance" id="apidoc.element.lunr.QueryParser.parseEditDistance">
        function <span class="apidocSignatureSpan">lunr.QueryParser.</span>parseEditDistance
        <span class="apidocSignatureSpan">(parser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseEditDistance = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  var editDistance = parseInt(lexeme.str, 10)

  if (isNaN(editDistance)) {
    var errorMessage = &#x22;edit distance must be numeric&#x22;
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  parser.currentClause.editDistance = editDistance

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    parser.nextClause()
    return
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      parser.nextClause()
      return lunr.QueryParser.parseTerm
    case lunr.QueryLexer.FIELD:
      parser.nextClause()
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.EDIT_DISTANCE:
      return lunr.QueryParser.parseEditDistance
    case lunr.QueryLexer.BOOST:
      return lunr.QueryParser.parseBoost
    default:
      var errorMessage = &#x22;Unexpected lexeme type &#x27;&#x22; + nextLexeme.type + &#x22;&#x27;&#x22;
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryParser.parseField" id="apidoc.element.lunr.QueryParser.parseField">
        function <span class="apidocSignatureSpan">lunr.QueryParser.</span>parseField
        <span class="apidocSignatureSpan">(parser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseField = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  if (parser.query.allFields.indexOf(lexeme.str) == -1) {
    var possibleFields = parser.query.allFields.map(function (f) { return &#x22;&#x27;&#x22; + f + &#x22;&#x27;&#x22; }).join(),
        errorMessage = &#x22;unrecognised field &#x27;&#x22; + lexeme.str + &#x22;&#x27;, possible fields: &#x22; + possibleFields

    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  parser.currentClause.fields = [lexeme.str]

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    var errorMessage = &#x22;expecting term, found nothing&#x22;
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      return lunr.QueryParser.parseTerm
    default:
      var errorMessage = &#x22;expecting a field, found &#x27;&#x22; + nextLexeme.type + &#x22;&#x27;&#x22;
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryParser.parseFieldOrTerm" id="apidoc.element.lunr.QueryParser.parseFieldOrTerm">
        function <span class="apidocSignatureSpan">lunr.QueryParser.</span>parseFieldOrTerm
        <span class="apidocSignatureSpan">(parser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseFieldOrTerm = function (parser) {
  var lexeme = parser.peekLexeme()

  if (lexeme == undefined) {
    return
  }

  switch (lexeme.type) {
    case lunr.QueryLexer.FIELD:
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.TERM:
      return lunr.QueryParser.parseTerm
    default:
      var errorMessage = &#x22;expected either a field or a term, found &#x22; + lexeme.type + &#x22; with value &#x27;&#x22; + lexeme.str + &#x22;&#x27;&#x22;
      throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryParser.parseTerm" id="apidoc.element.lunr.QueryParser.parseTerm">
        function <span class="apidocSignatureSpan">lunr.QueryParser.</span>parseTerm
        <span class="apidocSignatureSpan">(parser)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseTerm = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  parser.currentClause.term = lexeme.str.toLowerCase()

  if (lexeme.str.indexOf(&#x22;*&#x22;) != -1) {
    parser.currentClause.usePipeline = false
  }

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    parser.nextClause()
    return
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      parser.nextClause()
      return lunr.QueryParser.parseTerm
    case lunr.QueryLexer.FIELD:
      parser.nextClause()
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.EDIT_DISTANCE:
      return lunr.QueryParser.parseEditDistance
    case lunr.QueryLexer.BOOST:
      return lunr.QueryParser.parseBoost
    default:
      var errorMessage = &#x22;Unexpected lexeme type &#x27;&#x22; + nextLexeme.type + &#x22;&#x27;&#x22;
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.QueryParser.prototype" id="apidoc.module.lunr.QueryParser.prototype">module lunr.QueryParser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.QueryParser.prototype.consumeLexeme" id="apidoc.element.lunr.QueryParser.prototype.consumeLexeme">
        function <span class="apidocSignatureSpan">lunr.QueryParser.prototype.</span>consumeLexeme
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">consumeLexeme = function () {
  var lexeme = this.peekLexeme()
  this.lexemeIdx += 1
  return lexeme
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  default:
    var errorMessage = &#x22;expected either a field or a term, found &#x22; + lexeme.type + &#x22; with value &#x27;&#x22; + lexeme
.str + &#x22;&#x27;&#x22;
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
}
}

lunr.QueryParser.parseField = function (parser) {
var lexeme = parser.<span class="apidocCodeKeywordSpan">consumeLexeme</span>()

if (lexeme == undefined) {
  return
}

if (parser.query.allFields.indexOf(lexeme.str) == -1) {
  var possibleFields = parser.query.allFields.map(function (f) { return &#x22;&#x27;&#x22; + f + &#x22;&#x27;&#x22; }).join(),
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryParser.prototype.nextClause" id="apidoc.element.lunr.QueryParser.prototype.nextClause">
        function <span class="apidocSignatureSpan">lunr.QueryParser.prototype.</span>nextClause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nextClause = function () {
  var completedClause = this.currentClause
  this.query.clause(completedClause)
  this.currentClause = {}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (lexeme.str.indexOf(&#x22;*&#x22;) != -1) {
  parser.currentClause.usePipeline = false
}

var nextLexeme = parser.peekLexeme()

if (nextLexeme == undefined) {
  parser.<span class="apidocCodeKeywordSpan">nextClause</span>()
  return
}

switch (nextLexeme.type) {
  case lunr.QueryLexer.TERM:
    parser.nextClause()
    return lunr.QueryParser.parseTerm
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryParser.prototype.parse" id="apidoc.element.lunr.QueryParser.prototype.parse">
        function <span class="apidocSignatureSpan">lunr.QueryParser.prototype.</span>parse
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function () {
  this.lexer.run()
  this.lexemes = this.lexer.lexemes

  var state = lunr.QueryParser.parseFieldOrTerm

  while (state) {
    state = state(this)
  }

  return this.query
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {lunr.Index~QueryString} queryString - A string containing a lunr query.
* @throws {lunr.QueryParseError} If the passed query string cannot be parsed.
* @returns {lunr.Index~Result[]}
*/
lunr.Index.prototype.search = function (queryString) {
 return this.query(function (query) {
   var parser = new lunr.QueryParser(queryString, query)
   parser.<span class="apidocCodeKeywordSpan">parse</span>()
 })
}

/**
* A query builder callback provides a query object to be used to express
* the query to perform on the index.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.QueryParser.prototype.peekLexeme" id="apidoc.element.lunr.QueryParser.prototype.peekLexeme">
        function <span class="apidocSignatureSpan">lunr.QueryParser.prototype.</span>peekLexeme
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">peekLexeme = function () {
  return this.lexemes[this.lexemeIdx]
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

lunr.QueryParser.prototype.peekLexeme = function () {
return this.lexemes[this.lexemeIdx]
}

lunr.QueryParser.prototype.consumeLexeme = function () {
var lexeme = this.<span class="apidocCodeKeywordSpan">peekLexeme</span>()
this.lexemeIdx += 1
return lexeme
}

lunr.QueryParser.prototype.nextClause = function () {
var completedClause = this.currentClause
this.query.clause(completedClause)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Token" id="apidoc.module.lunr.Token">module lunr.Token</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Token.Token" id="apidoc.element.lunr.Token.Token">
        function <span class="apidocSignatureSpan">lunr.</span>Token
        <span class="apidocSignatureSpan">(str, metadata)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Token = function (str, metadata) {
  this.str = str || &#x22;&#x22;
  this.metadata = metadata || {}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
lunr.tokenizer = function (obj) {
if (obj == null || obj == undefined) {
  return []
}

if (Array.isArray(obj)) {
  return obj.map(function (t) {
    return new lunr.<span class="apidocCodeKeywordSpan">Token</span>(lunr.utils.asString(t).toLowerCase())
  })
}

var str = obj.toString().trim().toLowerCase(),
    len = str.length,
    tokens = []
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Token.prototype" id="apidoc.module.lunr.Token.prototype">module lunr.Token.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Token.prototype.clone" id="apidoc.element.lunr.Token.prototype.clone">
        function <span class="apidocSignatureSpan">lunr.Token.prototype.</span>clone
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function (fn) {
  fn = fn || function (s) { return s }
  return new lunr.Token (fn(this.str, this.metadata), this.metadata)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Token.prototype.toString" id="apidoc.element.lunr.Token.prototype.toString">
        function <span class="apidocSignatureSpan">lunr.Token.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
  return this.str
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @return {String} string representation of the passed object.
* @memberOf Utils
*/
lunr.utils.asString = function (obj) {
 if (obj === void 0 || obj === null) {
   return &#x22;&#x22;
 } else {
   return obj.<span class="apidocCodeKeywordSpan">toString</span>()
 }
}
/**
* A function to calculate the inverse document frequency for
* a posting. This is shared between the builder and the index
*
* @private
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Token.prototype.update" id="apidoc.element.lunr.Token.prototype.update">
        function <span class="apidocSignatureSpan">lunr.Token.prototype.</span>update
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (fn) {
  this.str = fn(this.str, this.metadata)
  return this
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @param {Object} metadata - All metadata associated with this token.
 */

/**
 * Applies the given function to the wrapped string token.
 *
 * @example
 * token.<span class="apidocCodeKeywordSpan">update</span>(function (str, metadata) {
 *   return str.toUpperCase()
 * })
 *
 * @param {lunr.Token~updateFunction} fn - A function to apply to the token string.
 * @returns {lunr.Token}
 */
lunr.Token.prototype.update = function (fn) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.TokenSet" id="apidoc.module.lunr.TokenSet">module lunr.TokenSet</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.TokenSet.TokenSet" id="apidoc.element.lunr.TokenSet.TokenSet">
        function <span class="apidocSignatureSpan">lunr.</span>TokenSet
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">TokenSet = function () {
  this.final = false
  this.edges = {}
  this.id = lunr.TokenSet._nextId
  lunr.TokenSet._nextId += 1
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet.Builder" id="apidoc.element.lunr.TokenSet.Builder">
        function <span class="apidocSignatureSpan">lunr.TokenSet.</span>Builder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Builder = function () {
  this.previousWord = &#x22;&#x22;
  this.root = new lunr.TokenSet
  this.uncheckedNodes = []
  this.minimizedNodes = {}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet.fromArray" id="apidoc.element.lunr.TokenSet.fromArray">
        function <span class="apidocSignatureSpan">lunr.TokenSet.</span>fromArray
        <span class="apidocSignatureSpan">(arr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromArray = function (arr) {
  var builder = new lunr.TokenSet.Builder

  for (var i = 0, len = arr.length; i &#x3c; len; i++) {
    builder.insert(arr[i])
  }

  builder.finish()
  return builder.root
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
* Creates a token set of all tokens in the index using lunr.TokenSet
*
* @private
*/
lunr.Builder.prototype.createTokenSet = function () {
 this.tokenSet = lunr.TokenSet.<span class="apidocCodeKeywordSpan">fromArray</span>(
   Object.keys(this.invertedIndex).sort()
 )
}

/**
* Builds the index, creating an instance of lunr.Index.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet.fromClause" id="apidoc.element.lunr.TokenSet.fromClause">
        function <span class="apidocSignatureSpan">lunr.TokenSet.</span>fromClause
        <span class="apidocSignatureSpan">(clause)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromClause = function (clause) {
  if (&#x27;editDistance&#x27; in clause) {
    return lunr.TokenSet.fromFuzzyString(clause.term, clause.editDistance)
  } else {
    return lunr.TokenSet.fromString(clause.term)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
clause.term = term

/*
 * From the term in the clause we create a token set which will then
 * be used to intersect the indexes token set to get a list of terms
 * to lookup in the inverted index
 */
var termTokenSet = lunr.TokenSet.<span class="apidocCodeKeywordSpan">fromClause</span>(clause),
    expandedTerms = this.tokenSet.intersect(termTokenSet).toArray()

for (var j = 0; j &#x3c; expandedTerms.length; j++) {
  /*
   * For each term calculate the score as the term relates to the
   * query using the same calculation used to score documents during
   * indexing. This score will be used to build a vector space
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet.fromFuzzyString" id="apidoc.element.lunr.TokenSet.fromFuzzyString">
        function <span class="apidocSignatureSpan">lunr.TokenSet.</span>fromFuzzyString
        <span class="apidocSignatureSpan">(str, editDistance)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromFuzzyString = function (str, editDistance) {
  var root = new lunr.TokenSet

  var stack = [{
    node: root,
    editsRemaining: editDistance,
    str: str
  }]

  while (stack.length) {
    var frame = stack.pop()

    // no edit
    if (frame.str.length &#x3e; 0) {
      var char = frame.str.charAt(0),
          noEditNode

      if (char in frame.node.edges) {
        noEditNode = frame.node.edges[char]
      } else {
        noEditNode = new lunr.TokenSet
        frame.node.edges[char] = noEditNode
      }

      if (frame.str.length == 1) {
        noEditNode.final = true
      } else {
        stack.push({
          node: noEditNode,
          editsRemaining: frame.editsRemaining,
          str: frame.str.slice(1)
        })
      }
    }

    // deletion
    // can only do a deletion if we have enough edits remaining
    // and if there are characters left to delete in the string
    if (frame.editsRemaining &#x3e; 0 &#x26;&#x26; frame.str.length &#x3e; 1) {
      var char = frame.str.charAt(1),
          deletionNode

      if (char in frame.node.edges) {
        deletionNode = frame.node.edges[char]
      } else {
        deletionNode = new lunr.TokenSet
        frame.node.edges[char] = deletionNode
      }

      if (frame.str.length &#x3c;= 2) {
        deletionNode.final = true
      } else {
        stack.push({
          node: deletionNode,
          editsRemaining: frame.editsRemaining - 1,
          str: frame.str.slice(2)
        })
      }
    }

    // deletion
    // just removing the last character from the str
    if (frame.editsRemaining &#x3e; 0 &#x26;&#x26; frame.str.length == 1) {
      frame.node.final = true
    }

    // substitution
    // can only do a substitution if we have enough edits remaining
    // and if there are characters left to substitute
    if (frame.editsRemaining &#x3e; 0 &#x26;&#x26; frame.str.length &#x3e;= 1) {
      if (&#x22;*&#x22; in frame.node.edges) {
        var substitutionNode = frame.node.edges[&#x22;*&#x22;]
      } else {
        var substitutionNode = new lunr.TokenSet
        frame.node.edges[&#x22;*&#x22;] = substitutionNode
      }

      if (frame.str.length == 1) {
        substitutionNode.final = true
      } else {
        stack.push({
          node: substitutionNode,
          editsRemaining: frame.editsRemaining - 1,
          str: frame.str.slice(1)
        })
      }
    }

    // insertion
    // can only do insertion if there are edits remaining
    if (frame.editsRemaining &#x3e; 0) {
      if (&#x22;*&#x22; in frame.node.edges) {
        var insertionNode = frame.node.edges[&#x22;*&#x22;]
      } else {
        var insertionNode = new lunr.TokenSet
        frame.node.edges[&#x22;*&#x22;] = insertionNode
      }

      if (frame.str.length == 0) {
        insertionNode.final = true
      } else {
        stack.push({
          node: insertionNode,
          editsRemaining: frame.editsRemaining - 1,
          str: frame.str
        })
      }
    }

    // transposition
    // can only do a transposition if there are edits remaining
    // and there are enough characters to transpose
    if (frame.editsRemaining &#x3e; 0 &#x26;&#x26; frame.str.length &#x3e; 1) {
      var charA = frame.str.charAt(0),
          charB = frame.str.charAt(1),
          transposeNode

      if (charB in frame.node.edges) {
        transposeNode = frame.node.edges[charB]
      } else {
        transposeNode = new lunr.TokenSet
        frame.node.edges[charB] = transposeNode
      }

      if (frame.str.length == 1) {
        transposeNode.final = true
      } else {
        stack.push({
          node: transposeNode,
          editsRemaining: frame.editsRemaining - 1,
          str: charA + frame.str.slice(2)
        })
      }
    }
  }

  return root
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {Object} clause - A single clause from lunr.Query.
* @param {string} clause.term - The query clause term.
* @param {number} [clause.editDistance] - The optional edit distance for the term.
* @returns {lunr.TokenSet}
*/
lunr.TokenSet.fromClause = function (clause) {
 if (&#x27;editDistance&#x27; in clause) {
   return lunr.TokenSet.<span class="apidocCodeKeywordSpan">fromFuzzyString</span>(clause.term, clause.editDistance)
 } else {
   return lunr.TokenSet.fromString(clause.term)
 }
}

/**
* Creates a token set representing a single string with a specified
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet.fromString" id="apidoc.element.lunr.TokenSet.fromString">
        function <span class="apidocSignatureSpan">lunr.TokenSet.</span>fromString
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromString = function (str) {
  var node = new lunr.TokenSet,
      root = node,
      wildcardFound = false

<span class="apidocCodeCommentSpan">  /*
   * Iterates through all characters within the passed string
   * appending a node for each character.
   *
   * As soon as a wildcard character is found then a self
   * referencing edge is introduced to continually match
   * any number of any characters.
   */
</span>  for (var i = 0, len = str.length; i &#x3c; len; i++) {
    var char = str[i],
        final = (i == len - 1)

    if (char == &#x22;*&#x22;) {
      wildcardFound = true
      node.edges[char] = node
      node.final = final

    } else {
      var next = new lunr.TokenSet
      next.final = final

      node.edges[char] = next
      node = next

      // TODO: is this needed anymore?
      if (wildcardFound) {
        node.edges[&#x22;*&#x22;] = root
      }
    }
  }

  return root
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {number} [clause.editDistance] - The optional edit distance for the term.
* @returns {lunr.TokenSet}
*/
lunr.TokenSet.fromClause = function (clause) {
 if (&#x27;editDistance&#x27; in clause) {
   return lunr.TokenSet.fromFuzzyString(clause.term, clause.editDistance)
 } else {
   return lunr.TokenSet.<span class="apidocCodeKeywordSpan">fromString</span>(clause.term)
 }
}

/**
* Creates a token set representing a single string with a specified
* edit distance.
*
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.TokenSet.Builder" id="apidoc.module.lunr.TokenSet.Builder">module lunr.TokenSet.Builder</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.TokenSet.Builder.Builder" id="apidoc.element.lunr.TokenSet.Builder.Builder">
        function <span class="apidocSignatureSpan">lunr.TokenSet.</span>Builder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Builder = function () {
  this.previousWord = &#x22;&#x22;
  this.root = new lunr.TokenSet
  this.uncheckedNodes = []
  this.minimizedNodes = {}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.TokenSet.Builder.prototype" id="apidoc.module.lunr.TokenSet.Builder.prototype">module lunr.TokenSet.Builder.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.TokenSet.Builder.prototype.finish" id="apidoc.element.lunr.TokenSet.Builder.prototype.finish">
        function <span class="apidocSignatureSpan">lunr.TokenSet.Builder.prototype.</span>finish
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">finish = function () {
  this.minimize(0)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
lunr.TokenSet.fromArray = function (arr) {
 var builder = new lunr.TokenSet.Builder

 for (var i = 0, len = arr.length; i &#x3c; len; i++) {
   builder.insert(arr[i])
 }

 builder.<span class="apidocCodeKeywordSpan">finish</span>()
 return builder.root
}

/**
* Creates a token set from a query clause.
*
* @private
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet.Builder.prototype.insert" id="apidoc.element.lunr.TokenSet.Builder.prototype.insert">
        function <span class="apidocSignatureSpan">lunr.TokenSet.Builder.prototype.</span>insert
        <span class="apidocSignatureSpan">(word)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (word) {
  var node,
      commonPrefix = 0

  if (word &#x3c; this.previousWord) {
    throw new Error (&#x22;Out of order word insertion&#x22;)
  }

  for (var i = 0; i &#x3c; word.length &#x26;&#x26; i &#x3c; this.previousWord.length; i++) {
    if (word[i] != this.previousWord[i]) break
    commonPrefix++
  }

  this.minimize(commonPrefix)

  if (this.uncheckedNodes.length == 0) {
    node = this.root
  } else {
    node = this.uncheckedNodes[this.uncheckedNodes.length - 1].child
  }

  for (var i = commonPrefix; i &#x3c; word.length; i++) {
    var nextNode = new lunr.TokenSet,
        char = word[i]

    node.edges[char] = nextNode

    this.uncheckedNodes.push({
      parent: node,
      char: char,
      child: nextNode
    })

    node = nextNode
  }

  node.final = true
  this.previousWord = word
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @returns {lunr.TokenSet}
 * @throws Will throw an error if the input array is not sorted.
 */
lunr.TokenSet.fromArray = function (arr) {
  var builder = new lunr.TokenSet.Builder

  for (var i = 0, len = arr.length; i &#x3c; len; i++) {
    builder.<span class="apidocCodeKeywordSpan">insert</span>(arr[i])
  }

  builder.finish()
  return builder.root
}

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet.Builder.prototype.minimize" id="apidoc.element.lunr.TokenSet.Builder.prototype.minimize">
        function <span class="apidocSignatureSpan">lunr.TokenSet.Builder.prototype.</span>minimize
        <span class="apidocSignatureSpan">(downTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">minimize = function (downTo) {
  for (var i = this.uncheckedNodes.length - 1; i &#x3e;= downTo; i--) {
    var node = this.uncheckedNodes[i],
        childKey = node.child.toString()

    if (childKey in this.minimizedNodes) {
      node.parent.edges[node.char] = this.minimizedNodes[childKey]
    } else {
      // Cache the key for this node since
      // we know it can&#x27;t change anymore
      node.child._str = childKey

      this.minimizedNodes[childKey] = node.child
    }

    this.uncheckedNodes.pop()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

for (var i = 0; i &#x3c; word.length &#x26;&#x26; i &#x3c; this.previousWord.length; i++) {
  if (word[i] != this.previousWord[i]) break
  commonPrefix++
}

this.<span class="apidocCodeKeywordSpan">minimize</span>(commonPrefix)

if (this.uncheckedNodes.length == 0) {
  node = this.root
} else {
  node = this.uncheckedNodes[this.uncheckedNodes.length - 1].child
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.TokenSet.prototype" id="apidoc.module.lunr.TokenSet.prototype">module lunr.TokenSet.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.TokenSet.prototype.intersect" id="apidoc.element.lunr.TokenSet.prototype.intersect">
        function <span class="apidocSignatureSpan">lunr.TokenSet.prototype.</span>intersect
        <span class="apidocSignatureSpan">(b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">intersect = function (b) {
  var output = new lunr.TokenSet,
      frame = undefined

  var stack = [{
    qNode: b,
    output: output,
    node: this
  }]

  while (stack.length) {
    frame = stack.pop()

    // NOTE: As with the #toString method, we are using
    // Object.keys and a for loop instead of a for-in loop
    // as both of these objects enter &#x27;hash&#x27; mode, causing
    // the function to be de-optimised in V8
    var qEdges = Object.keys(frame.qNode.edges),
        qLen = qEdges.length,
        nEdges = Object.keys(frame.node.edges),
        nLen = nEdges.length

    for (var q = 0; q &#x3c; qLen; q++) {
      var qEdge = qEdges[q]

      for (var n = 0; n &#x3c; nLen; n++) {
        var nEdge = nEdges[n]

        if (nEdge == qEdge || qEdge == &#x27;*&#x27;) {
          var node = frame.node.edges[nEdge],
              qNode = frame.qNode.edges[qEdge],
              final = node.final &#x26;&#x26; qNode.final,
              next = undefined

          if (nEdge in frame.output.edges) {
            // an edge already exists for this character
            // no need to create a new node, just set the finality
            // bit unless this node is already final
            next = frame.output.edges[nEdge]
            next.final = next.final || final

          } else {
            // no edge exists yet, must create one
            // set the finality bit and insert it
            // into the output
            next = new lunr.TokenSet
            next.final = final
            frame.output.edges[nEdge] = next
          }

          stack.push({
            qNode: qNode,
            output: next,
            node: node
          })
        }
      }
    }
  }

  return output
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/*
 * From the term in the clause we create a token set which will then
 * be used to intersect the indexes token set to get a list of terms
 * to lookup in the inverted index
 */
var termTokenSet = lunr.TokenSet.fromClause(clause),
    expandedTerms = this.tokenSet.<span class="apidocCodeKeywordSpan">intersect</span>(termTokenSet).toArray()

for (var j = 0; j &#x3c; expandedTerms.length; j++) {
  /*
   * For each term calculate the score as the term relates to the
   * query using the same calculation used to score documents during
   * indexing. This score will be used to build a vector space
   * representation  of the query.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet.prototype.toArray" id="apidoc.element.lunr.TokenSet.prototype.toArray">
        function <span class="apidocSignatureSpan">lunr.TokenSet.prototype.</span>toArray
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toArray = function () {
  var words = []

  var stack = [{
    prefix: &#x22;&#x22;,
    node: this
  }]

  while (stack.length) {
    var frame = stack.pop(),
        edges = Object.keys(frame.node.edges),
        len = edges.length

    if (frame.node.final) {
      words.push(frame.prefix)
    }

    for (var i = 0; i &#x3c; len; i++) {
      var edge = edges[i]

      stack.push({
        prefix: frame.prefix.concat(edge),
        node: frame.node.edges[edge]
      })
    }
  }

  return words
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/*
 * From the term in the clause we create a token set which will then
 * be used to intersect the indexes token set to get a list of terms
 * to lookup in the inverted index
 */
var termTokenSet = lunr.TokenSet.fromClause(clause),
    expandedTerms = this.tokenSet.intersect(termTokenSet).<span class="apidocCodeKeywordSpan">toArray</span>()

for (var j = 0; j &#x3c; expandedTerms.length; j++) {
  /*
   * For each term calculate the score as the term relates to the
   * query using the same calculation used to score documents during
   * indexing. This score will be used to build a vector space
   * representation  of the query.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.TokenSet.prototype.toString" id="apidoc.element.lunr.TokenSet.prototype.toString">
        function <span class="apidocSignatureSpan">lunr.TokenSet.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
  // NOTE: Using Object.keys here as this.edges is very likely
  // to enter &#x27;hash-mode&#x27; with many keys being added
  //
  // avoiding a for-in loop here as it leads to the function
  // being de-optimised (at least in V8). From some simple
  // benchmarks the performance is comparable, but allowing
  // V8 to optimize may mean easy performance wins in the future.

  if (this._str) {
    return this._str
  }

  var str = this.final ? &#x27;1&#x27; : &#x27;0&#x27;,
      labels = Object.keys(this.edges).sort(),
      len = labels.length

  for (var i = 0; i &#x3c; len; i++) {
    var label = labels[i],
        node = this.edges[label]

    str = str + label + node.id
  }

  return str
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @return {String} string representation of the passed object.
* @memberOf Utils
*/
lunr.utils.asString = function (obj) {
 if (obj === void 0 || obj === null) {
   return &#x22;&#x22;
 } else {
   return obj.<span class="apidocCodeKeywordSpan">toString</span>()
 }
}
/**
* A function to calculate the inverse document frequency for
* a posting. This is shared between the builder and the index
*
* @private
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Vector" id="apidoc.module.lunr.Vector">module lunr.Vector</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Vector.Vector" id="apidoc.element.lunr.Vector.Vector">
        function <span class="apidocSignatureSpan">lunr.</span>Vector
        <span class="apidocSignatureSpan">(elements)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Vector = function (elements) {
  this._magnitude = 0
  this.elements = elements || []
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

for (var i = 0; i &#x3c; serializedVectors.length; i++, documentCount++) {
  var tuple = serializedVectors[i],
      ref = tuple[0],
      elements = tuple[1]

  documentVectors[ref] = new lunr.<span class="apidocCodeKeywordSpan">Vector</span>(elements)
}

for (var i = 0; i &#x3c; serializedInvertedIndex.length; i++) {
  var tuple = serializedInvertedIndex[i],
      term = tuple[0],
      posting = tuple[1]
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.Vector.prototype" id="apidoc.module.lunr.Vector.prototype">module lunr.Vector.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.Vector.prototype.dot" id="apidoc.element.lunr.Vector.prototype.dot">
        function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>dot
        <span class="apidocSignatureSpan">(otherVector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dot = function (otherVector) {
  var dotProduct = 0,
      a = this.elements, b = otherVector.elements,
      aLen = a.length, bLen = b.length,
      aVal = 0, bVal = 0,
      i = 0, j = 0

  while (i &#x3c; aLen &#x26;&#x26; j &#x3c; bLen) {
    aVal = a[i], bVal = b[j]
    if (aVal &#x3c; bVal) {
      i += 2
    } else if (aVal &#x3e; bVal) {
      j += 2
    } else if (aVal == bVal) {
      dotProduct += a[i + 1] * b[j + 1]
      i += 2
      j += 2
    }
  }

  return dotProduct
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* vector.
*
* @param {lunr.Vector} otherVector - The other vector to calculate the
* similarity with.
* @returns {Number}
*/
lunr.Vector.prototype.similarity = function (otherVector) {
 return this.<span class="apidocCodeKeywordSpan">dot</span>(otherVector) / (this.magnitude() * otherVector.magnitude())
}

/**
* Converts the vector to an array of the elements within the vector.
*
* @returns {Number[]}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Vector.prototype.insert" id="apidoc.element.lunr.Vector.prototype.insert">
        function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>insert
        <span class="apidocSignatureSpan">(insertIdx, val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (insertIdx, val) {
  this._magnitude = 0

  if (this.elements.length == 0) {
    this.elements.push(insertIdx, val)
    return
  }

  var start = 0,
      end = this.elements.length,
      sliceLength = end - start,
      pivot = Math.floor((sliceLength / 2) / 2) * 2,
      pivotIdx = this.elements[pivot]

  while (sliceLength &#x3e; 2) {
    if (pivotIdx == insertIdx) {
      throw &#x22;duplicate index&#x22;
    }

    if (insertIdx &#x3e; pivotIdx) {
      start = pivot
    }

    if (insertIdx &#x3c; pivotIdx) {
      end = pivot
    }

    sliceLength = end - start
    pivot = start + Math.floor((sliceLength / 2) / 2) * 2
    pivotIdx = this.elements[pivot]
  }

  if (pivotIdx &#x3e; insertIdx) {
    this.elements.splice(pivot, 0, insertIdx, val)
  }

  if (pivotIdx &#x3c; insertIdx) {
    this.elements.splice(pivot + 2, 0, insertIdx, val)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @returns {lunr.TokenSet}
 * @throws Will throw an error if the input array is not sorted.
 */
lunr.TokenSet.fromArray = function (arr) {
  var builder = new lunr.TokenSet.Builder

  for (var i = 0, len = arr.length; i &#x3c; len; i++) {
    builder.<span class="apidocCodeKeywordSpan">insert</span>(arr[i])
  }

  builder.finish()
  return builder.root
}

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Vector.prototype.magnitude" id="apidoc.element.lunr.Vector.prototype.magnitude">
        function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>magnitude
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">magnitude = function () {
  if (this._magnitude) return this._magnitude

  var sumOfSquares = 0,
      elementsLength = this.elements.length

  for (var i = 1; i &#x3c; elementsLength; i += 2) {
    var val = this.elements[i]
    sumOfSquares += val * val
  }

  return this._magnitude = Math.sqrt(sumOfSquares)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* vector.
*
* @param {lunr.Vector} otherVector - The other vector to calculate the
* similarity with.
* @returns {Number}
*/
lunr.Vector.prototype.similarity = function (otherVector) {
 return this.dot(otherVector) / (this.<span class="apidocCodeKeywordSpan">magnitude</span>() * otherVector.magnitude())
}

/**
* Converts the vector to an array of the elements within the vector.
*
* @returns {Number[]}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Vector.prototype.similarity" id="apidoc.element.lunr.Vector.prototype.similarity">
        function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>similarity
        <span class="apidocSignatureSpan">(otherVector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">similarity = function (otherVector) {
  return this.dot(otherVector) / (this.magnitude() * otherVector.magnitude())
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   *
   * This score, along with the document ref and any metadata
   * we collected into a lunr.MatchData instance are stored
   * in the results array ready for returning to the caller
   */
  var ref = matchingDocumentRefs[i],
      documentVector = this.documentVectors[ref],
      score = queryVector.<span class="apidocCodeKeywordSpan">similarity</span>(documentVector)

  results.push({
    ref: ref,
    score: score,
    matchData: matchingDocuments[ref]
  })
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Vector.prototype.toArray" id="apidoc.element.lunr.Vector.prototype.toArray">
        function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>toArray
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toArray = function () {
  var output = new Array (this.elements.length / 2)

  for (var i = 1, j = 0; i &#x3c; this.elements.length; i += 2, j++) {
    output[j] = this.elements[i]
  }

  return output
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/*
 * From the term in the clause we create a token set which will then
 * be used to intersect the indexes token set to get a list of terms
 * to lookup in the inverted index
 */
var termTokenSet = lunr.TokenSet.fromClause(clause),
    expandedTerms = this.tokenSet.intersect(termTokenSet).<span class="apidocCodeKeywordSpan">toArray</span>()

for (var j = 0; j &#x3c; expandedTerms.length; j++) {
  /*
   * For each term calculate the score as the term relates to the
   * query using the same calculation used to score documents during
   * indexing. This score will be used to build a vector space
   * representation  of the query.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.Vector.prototype.toJSON" id="apidoc.element.lunr.Vector.prototype.toJSON">
        function <span class="apidocSignatureSpan">lunr.Vector.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
  return this.elements
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  .sort()
  .map(function (term) {
    return [term, this.invertedIndex[term]]
  }, this)

var documentVectors = Object.keys(this.documentVectors)
  .map(function (ref) {
    return [ref, this.documentVectors[ref].<span class="apidocCodeKeywordSpan">toJSON</span>()]
  }, this)

return {
  version: lunr.version,
  averageDocumentLength: this.averageDocumentLength,
  b: this.b,
  k1: this.k1,
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.lunr.utils" id="apidoc.module.lunr.utils">module lunr.utils</a></h1>


    <h2>
        <a href="#apidoc.element.lunr.utils.asString" id="apidoc.element.lunr.utils.asString">
        function <span class="apidocSignatureSpan">lunr.utils.</span>asString
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">asString = function (obj) {
  if (obj === void 0 || obj === null) {
    return &#x22;&#x22;
  } else {
    return obj.toString()
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
lunr.tokenizer = function (obj) {
if (obj == null || obj == undefined) {
  return []
}

if (Array.isArray(obj)) {
  return obj.map(function (t) {
    return new lunr.Token(lunr.utils.<span class="apidocCodeKeywordSpan">asString</span>(t).toLowerCase())
  })
}

var str = obj.toString().trim().toLowerCase(),
    len = str.length,
    tokens = []
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.lunr.utils.warn" id="apidoc.element.lunr.utils.warn">
        function <span class="apidocSignatureSpan">lunr.utils.</span>warn
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warn = function (message) {
  if (global.console &#x26;&#x26; console.warn) {
    console.warn(message)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {String} message The message to be printed.
* @memberOf Utils
*/
lunr.utils.warn = (function (global) {
 /* eslint-disable no-console */
 return function (message) {
   if (global.console &#x26;&#x26; console.warn) {
     console.<span class="apidocCodeKeywordSpan">warn</span>(message)
   }
 }
 /* eslint-enable no-console */
})(this)

/**
* Convert an object to a string.
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
